{"version":3,"file":"index.js","sources":["../../src/base/LoaderDataFormat.ts","../../src/base/Loader.ts","../../src/base/_IndexedDB.ts","../../src/FSType.ts","../../src/HttpFS.ts","../../src/IndexedDBFS.ts","../../src/PathUtils.ts","../../src/ReadFS.ts","../../src/ReadWriteFS.ts"],"sourcesContent":["\r\n/**\r\n * 加载数据类型\r\n */\r\nexport enum LoaderDataFormat\r\n{\r\n    /**\r\n     * 以原始二进制数据形式接收下载的数据。\r\n     */\r\n    BINARY = \"binary\",\r\n    /**\r\n     * 以文本形式接收已下载的数据。\r\n     */\r\n    TEXT = \"text\",\r\n    /**\r\n     * 图片数据\r\n     */\r\n    IMAGE = \"image\",\r\n}\r\n","import { LoaderDataFormat } from \"./LoaderDataFormat\";\r\n\r\n/**\r\n * 加载类\r\n */\r\nexport class Loader\r\n{\r\n\r\n    /**\r\n     * 加载文本\r\n     * @param url   路径\r\n     */\r\n    loadText(url: string, onCompleted?: (content: string) => void, onRequestProgress?: () => void, onError?: (e: Error) => void)\r\n    {\r\n        xmlHttpRequestLoad({ url: url, dataFormat: LoaderDataFormat.TEXT, onCompleted: <any>onCompleted, onProgress: onRequestProgress, onError: onError });\r\n    }\r\n\r\n    /**\r\n     * 加载二进制\r\n     * @param url   路径\r\n     */\r\n    loadBinary(url: string, onCompleted?: (content: ArrayBuffer) => void, onRequestProgress?: () => void, onError?: (e: Error) => void)\r\n    {\r\n        xmlHttpRequestLoad({ url: url, dataFormat: LoaderDataFormat.BINARY, onCompleted: <any>onCompleted, onProgress: onRequestProgress, onError: onError });\r\n    }\r\n\r\n    /**\r\n     * 加载图片\r\n     * @param url   路径\r\n     */\r\n    loadImage(url: string, onCompleted?: (content: HTMLImageElement) => void, onRequestProgress?: () => void, onError?: (e: Error) => void)\r\n    {\r\n        var image = new Image();\r\n        image.crossOrigin = \"Anonymous\";\r\n        image.onload = (event) =>\r\n        {\r\n            onCompleted && onCompleted(image);\r\n        }\r\n        image.onerror = (event) =>\r\n        {\r\n            console.error(\"Error while trying to load texture: \" + url);\r\n            //\r\n            image.src = \"data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z\";\r\n            //\r\n            var err = new Error(url + \" 加载失败！\");\r\n            onError && onError(err);\r\n        }\r\n        image.src = url;\r\n    }\r\n}\r\n\r\n/**\r\n * 加载类\r\n */\r\nexport const loader = new Loader();\r\n\r\ninterface LoadItem\r\n{\r\n    url: string;\r\n    dataFormat: LoaderDataFormat;\r\n    onCompleted?: (content: string | ArrayBuffer) => void;\r\n    onProgress?: (loaded: number, total: number) => void;\r\n    onError?: (ev: Error) => void;\r\n}\r\n\r\n/**\r\n * 使用XMLHttpRequest加载\r\n * @param url           加载路径\r\n * @param dataFormat    数据类型\r\n */\r\nfunction xmlHttpRequestLoad(loadItem: LoadItem)\r\n{\r\n    var request = new XMLHttpRequest();\r\n    request.open('Get', loadItem.url, true);\r\n    request.setRequestHeader(\"Access-Control-Allow-Origin\", \"*\");\r\n    request.responseType = loadItem.dataFormat == LoaderDataFormat.BINARY ? \"arraybuffer\" : \"\";\r\n    request.onreadystatechange = onRequestReadystatechange(request, loadItem);\r\n    request.onprogress = onRequestProgress(request, loadItem);\r\n    request.send();\r\n}\r\n\r\n/**\r\n * 请求进度回调\r\n */\r\nfunction onRequestProgress(request: XMLHttpRequest, loadItem: LoadItem)\r\n{\r\n    return (event: ProgressEvent) =>\r\n    {\r\n        loadItem.onProgress && loadItem.onProgress(event.loaded, event.total);\r\n    }\r\n}\r\n\r\n/**\r\n * 请求状态变化回调\r\n */\r\nfunction onRequestReadystatechange(request: XMLHttpRequest, loadItem: LoadItem)\r\n{\r\n    return (ev) =>\r\n    {\r\n        if (request.readyState == 4)\r\n        {// 4 = \"loaded\"\r\n\r\n            request.onreadystatechange = <any>null;\r\n\r\n            if (request.status >= 200 && request.status < 300)\r\n            {\r\n                var content = loadItem.dataFormat == LoaderDataFormat.TEXT ? request.responseText : request.response;\r\n                loadItem.onCompleted && loadItem.onCompleted(content);\r\n            } else\r\n            {\r\n                var err = new Error(loadItem.url + \" 加载失败！\");\r\n                loadItem.onError && loadItem.onError(err);\r\n                loadItem.onCompleted && loadItem.onCompleted(null);\r\n            }\r\n        }\r\n    }\r\n}\r\n","\r\nvar databases: { [name: string]: IDBDatabase } = {};\r\n\r\n/**\r\n * \r\n */\r\nexport class _IndexedDB\r\n{\r\n    /**\r\n     * 数据库状态\r\n     */\r\n    private _dbStatus: {\r\n        [dbname: string]: {\r\n            /**\r\n             * 状态\r\n             */\r\n            status: DBStatus,\r\n            /**\r\n             * 开启或者升级成功回调\r\n             */\r\n            onsuccessCallbacks: ((err: Error, database: IDBDatabase) => void)[],\r\n            /**\r\n             * 升级回调\r\n             */\r\n            onupgradeneededCallbacks: ((newdatabase: IDBDatabase) => void)[],\r\n        }\r\n    } = {};\r\n\r\n    /**\r\n     * 是否支持 indexedDB \r\n     */\r\n    support()\r\n    {\r\n        if (typeof indexedDB == \"undefined\")\r\n        {\r\n            indexedDB = window.indexedDB || window[\"mozIndexedDB\"] || window[\"webkitIndexedDB\"] || window[\"msIndexedDB\"];\r\n\r\n            if (indexedDB == undefined)\r\n            {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * 获取数据库，如果不存在则新建数据库\r\n     * \r\n     * @param dbname 数据库名称\r\n     * @param callback 完成回调\r\n     */\r\n    getDatabase(dbname: string, callback: (err: any, database: IDBDatabase) => void)\r\n    {\r\n        if (databases[dbname])\r\n        {\r\n            callback(null, databases[dbname]);\r\n            return;\r\n        }\r\n\r\n        this._open(dbname, callback);\r\n    }\r\n\r\n    /**\r\n     * 打开或者升级数据库\r\n     * \r\n     * @param dbname 数据库名称\r\n     * @param callback 完成回调\r\n     * @param upgrade 是否升级数据库\r\n     * @param onupgrade 升级回调\r\n     */\r\n    private _open(dbname: string, callback: (err: any, database: IDBDatabase) => void, upgrade = false, onupgrade?: (newdatabase: IDBDatabase) => void)\r\n    {\r\n        if (!this._dbStatus[dbname]) this._dbStatus[dbname] = { status: DBStatus.unOpen, onsuccessCallbacks: [], onupgradeneededCallbacks: [] };\r\n\r\n        this._dbStatus[dbname].onsuccessCallbacks.push(callback);\r\n        if (upgrade)\r\n        {\r\n            console.assert(!!onupgrade);\r\n            this._dbStatus[dbname].onupgradeneededCallbacks.push(onupgrade);\r\n        }\r\n        if (this._dbStatus[dbname].status == DBStatus.opening || this._dbStatus[dbname].status == DBStatus.upgrading) return;\r\n\r\n        var request: IDBOpenDBRequest;\r\n        if (!upgrade)\r\n        {\r\n            request = indexedDB.open(dbname);\r\n            this._dbStatus[dbname].status = DBStatus.opening;\r\n        } else\r\n        {\r\n            var oldDatabase = databases[dbname];\r\n            oldDatabase.close();\r\n            delete databases[dbname];\r\n\r\n            request = indexedDB.open(dbname, oldDatabase.version + 1);\r\n            this._dbStatus[dbname].status = DBStatus.upgrading;\r\n        }\r\n\r\n        request.onupgradeneeded = (event) =>\r\n        {\r\n            var newdatabase: IDBDatabase = event.target[\"result\"];\r\n            request.onupgradeneeded = null;\r\n\r\n            var callbacks = this._dbStatus[dbname].onupgradeneededCallbacks.concat();\r\n            this._dbStatus[dbname].onupgradeneededCallbacks.length = 0;\r\n            callbacks.forEach(element =>\r\n            {\r\n                element(newdatabase);\r\n            });\r\n        }\r\n        request.onsuccess = (event) =>\r\n        {\r\n            databases[dbname] = event.target[\"result\"];\r\n            request.onsuccess = null;\r\n\r\n            this._dbStatus[dbname].status = DBStatus.opened;\r\n\r\n            var callbacks = this._dbStatus[dbname].onsuccessCallbacks.concat();\r\n            this._dbStatus[dbname].onsuccessCallbacks.length = 0;\r\n            callbacks.forEach(element =>\r\n            {\r\n                element(null, databases[dbname]);\r\n            });\r\n        };\r\n        request.onerror = (event) =>\r\n        {\r\n            request.onerror = null;\r\n\r\n            this._dbStatus[dbname].status = DBStatus.error;\r\n\r\n            var callbacks = this._dbStatus[dbname].onsuccessCallbacks.concat();\r\n            this._dbStatus[dbname].onsuccessCallbacks.length = 0;\r\n            callbacks.forEach(element =>\r\n            {\r\n                element(<any>event, <any>null);\r\n            });\r\n        };\r\n    }\r\n\r\n    /**\r\n     * 删除数据库\r\n     * \r\n     * @param dbname 数据库名称\r\n     * @param callback 完成回调\r\n     */\r\n    deleteDatabase(dbname: string, callback?: (err: any) => void)\r\n    {\r\n        var request = indexedDB.deleteDatabase(dbname);\r\n        request.onsuccess = function (event)\r\n        {\r\n            delete databases[dbname];\r\n            callback && callback(null);\r\n            request.onsuccess = null;\r\n        };\r\n        request.onerror = function (event)\r\n        {\r\n            callback && callback(event);\r\n            request.onerror = null;\r\n        };\r\n    }\r\n\r\n    /**\r\n     * 是否存在指定的对象存储\r\n     * \r\n     * @param dbname 数据库名称\r\n     * @param objectStroreName 对象存储名称\r\n     * @param callback 完成回调\r\n     */\r\n    hasObjectStore(dbname: string, objectStroreName: string, callback: (has: boolean) => void)\r\n    {\r\n        this.getDatabase(dbname, (err, database) =>\r\n        {\r\n            callback(database.objectStoreNames.contains(objectStroreName));\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 获取对象存储名称列表\r\n     * \r\n     * @param dbname 数据库\r\n     * @param callback 完成回调\r\n     */\r\n    getObjectStoreNames(dbname: string, callback: (err: Error | null, objectStoreNames: string[]) => void)\r\n    {\r\n        this.getDatabase(dbname, (err, database) =>\r\n        {\r\n            var objectStoreNames: string[] = [];\r\n            for (let i = 0; i < database.objectStoreNames.length; i++)\r\n            {\r\n                objectStoreNames.push(<string>database.objectStoreNames.item(i));\r\n            }\r\n            callback(null, objectStoreNames)\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 创建对象存储\r\n     * \r\n     * @param dbname 数据库名称\r\n     * @param objectStroreName 对象存储名称\r\n     * @param callback 完成回调\r\n     */\r\n    createObjectStore(dbname: string, objectStroreName: string, callback?: (err: any) => void)\r\n    {\r\n        this.getDatabase(dbname, (err, database) =>\r\n        {\r\n            if (database.objectStoreNames.contains(objectStroreName))\r\n            {\r\n                callback && callback(null);\r\n                return;\r\n            }\r\n\r\n            this._open(dbname, callback, true, (newdatabase: IDBDatabase) =>\r\n            {\r\n                newdatabase.createObjectStore(objectStroreName);\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 删除对象存储\r\n     * \r\n     * @param dbname 数据库名称\r\n     * @param objectStroreName 对象存储名称\r\n     * @param callback 完成回调\r\n     */\r\n    deleteObjectStore(dbname: string, objectStroreName: string, callback?: (err: any) => void)\r\n    {\r\n        this.getDatabase(dbname, (err, database) =>\r\n        {\r\n            if (!database.objectStoreNames.contains(objectStroreName))\r\n            {\r\n                callback && callback(null);\r\n                return;\r\n            }\r\n            this._open(dbname, callback, true, (newdatabase: IDBDatabase) =>\r\n            {\r\n                newdatabase.deleteObjectStore(objectStroreName);\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 获取对象存储中所有键列表\r\n     * \r\n     * @param dbname 数据库名称\r\n     * @param objectStroreName 对象存储名称\r\n     * @param callback 完成回调\r\n     */\r\n    getAllKeys(dbname: string, objectStroreName: string, callback?: (err: Error, keys: string[]) => void)\r\n    {\r\n        this.getDatabase(dbname, (err, database) =>\r\n        {\r\n            try\r\n            {\r\n                var transaction = database.transaction([objectStroreName], 'readwrite');\r\n                var objectStore = transaction.objectStore(objectStroreName);\r\n                var request = objectStore.getAllKeys();\r\n                request.onsuccess = function (event)\r\n                {\r\n                    callback && callback(null, event.target[\"result\"]);\r\n                    request.onsuccess = null;\r\n                };\r\n            } catch (error)\r\n            {\r\n                callback && callback(error, null);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 获取对象存储中指定键对应的数据\r\n     * \r\n     * @param dbname 数据库名称\r\n     * @param objectStroreName 对象存储名称\r\n     * @param key 键\r\n     * @param callback 完成回调\r\n     */\r\n    objectStoreGet(dbname: string, objectStroreName: string, key: string | number, callback?: (err: Error, data: any) => void)\r\n    {\r\n        this.getDatabase(dbname, (err, database) =>\r\n        {\r\n            var transaction = database.transaction([objectStroreName], 'readwrite');\r\n            var objectStore = transaction.objectStore(objectStroreName);\r\n            var request = objectStore.get(key);\r\n            request.onsuccess = function (event)\r\n            {\r\n                var result = event.target[\"result\"];\r\n                callback && callback(result != null ? null : new Error(`没有找到资源 ${key}`), result);\r\n                request.onsuccess = null;\r\n            };\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 设置对象存储的键与值，如果不存在指定键则新增否则修改。\r\n     * \r\n     * @param dbname 数据库名称\r\n     * @param objectStroreName 对象存储名称\r\n     * @param key 键\r\n     * @param data 数据\r\n     * @param callback 完成回调\r\n     */\r\n    objectStorePut(dbname: string, objectStroreName: string, key: string | number, data: any, callback?: (err: Error) => void)\r\n    {\r\n        this.getDatabase(dbname, (err, database) =>\r\n        {\r\n            try\r\n            {\r\n                var transaction = database.transaction([objectStroreName], 'readwrite');\r\n                var objectStore = transaction.objectStore(objectStroreName);\r\n                var request = objectStore.put(data, key);\r\n                request.onsuccess = function (event)\r\n                {\r\n                    callback && callback(null);\r\n                    request.onsuccess = null;\r\n                };\r\n            } catch (error)\r\n            {\r\n                callback && callback(error);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 删除对象存储中指定键以及对于数据\r\n     * \r\n     * @param dbname 数据库名称\r\n     * @param objectStroreName 对象存储名称\r\n     * @param key 键\r\n     * @param callback 完成回调\r\n     */\r\n    objectStoreDelete(dbname: string, objectStroreName: string, key: string | number, callback?: (err?: Error) => void)\r\n    {\r\n        this.getDatabase(dbname, (err, database) =>\r\n        {\r\n            try\r\n            {\r\n                var transaction = database.transaction([objectStroreName], 'readwrite');\r\n                var objectStore = transaction.objectStore(objectStroreName);\r\n                var request = objectStore.delete(key);\r\n                request.onsuccess = function (event)\r\n                {\r\n                    callback && callback();\r\n                    request.onsuccess = null;\r\n                };\r\n            } catch (error)\r\n            {\r\n                callback && callback(error);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 清空对象存储中数据\r\n     * \r\n     * @param dbname 数据库名称\r\n     * @param objectStroreName 对象存储名称\r\n     * @param callback 完成回调\r\n     */\r\n    objectStoreClear(dbname: string, objectStroreName: string, callback?: (err?: Error) => void)\r\n    {\r\n        this.getDatabase(dbname, (err, database) =>\r\n        {\r\n            try\r\n            {\r\n                var transaction = database.transaction([objectStroreName], 'readwrite');\r\n                var objectStore = transaction.objectStore(objectStroreName);\r\n                var request = objectStore.clear();\r\n                request.onsuccess = function (event)\r\n                {\r\n                    callback && callback();\r\n                    request.onsuccess = null;\r\n                };\r\n            } catch (error)\r\n            {\r\n                callback && callback(error);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * \r\n */\r\nexport const _indexedDB = new _IndexedDB();\r\n\r\n/**\r\n * 数据库状态\r\n */\r\nenum DBStatus\r\n{\r\n    /**\r\n     * 未开启\r\n     */\r\n    unOpen,\r\n\r\n    /**\r\n     * 正在开启中\r\n     */\r\n    opening,\r\n\r\n    /**\r\n     * 已开启\r\n     */\r\n    opened,\r\n\r\n    /**\r\n     * 正在升级中\r\n     */\r\n    upgrading,\r\n\r\n    /**\r\n     * 开启或者升级失败\r\n     */\r\n    error,\r\n}\r\n","\r\n/**\r\n * 文件系统类型\r\n */\r\nexport enum FSType\r\n{\r\n    http = \"http\",\r\n    native = \"native\",\r\n    indexedDB = \"indexedDB\"\r\n}\r\n","import { loader } from \"./base/Loader\";\r\nimport { FSType } from \"./FSType\";\r\nimport { IReadFS } from \"./IReadFS\";\r\n\r\n/**\r\n * Http可读文件系统\r\n */\r\nexport class HttpFS implements IReadFS\r\n{\r\n    /**\r\n     * 根路径\r\n     */\r\n    rootPath = \"\";\r\n\r\n    type = FSType.http;\r\n\r\n    constructor(rootPath = \"\")\r\n    {\r\n        this.rootPath = rootPath;\r\n        if (this.rootPath == \"\")\r\n        {\r\n            if (typeof document != \"undefined\")\r\n            {\r\n                var url = document.URL.split(\"?\").shift();\r\n                this.rootPath = url.substring(0, url.lastIndexOf(\"/\") + 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 读取文件\r\n     * @param path 路径\r\n     * @param callback 读取完成回调 当err不为null时表示读取失败\r\n     */\r\n    readArrayBuffer(path: string, callback: (err: Error, data: ArrayBuffer) => void)\r\n    {\r\n        // rootPath\r\n        loader.loadBinary(this.getAbsolutePath(path),\r\n            (content) =>\r\n            {\r\n                callback(null, content);\r\n            },\r\n            null,\r\n            (e) =>\r\n            {\r\n                callback(e, null);\r\n            });\r\n    }\r\n\r\n    /**\r\n     * 读取文件为字符串\r\n     * @param path 路径\r\n     * @param callback 读取完成回调 当err不为null时表示读取失败\r\n     */\r\n    readString(path: string, callback: (err: Error, data: string) => void)\r\n    {\r\n        loader.loadText(this.getAbsolutePath(path),\r\n            (content) =>\r\n            {\r\n                callback(null, content);\r\n            },\r\n            null,\r\n            (e) =>\r\n            {\r\n                callback(e, null);\r\n            });\r\n    }\r\n\r\n    /**\r\n     * 读取文件为Object\r\n     * @param path 路径\r\n     * @param callback 读取完成回调 当err不为null时表示读取失败\r\n     */\r\n    readObject(path: string, callback: (err: Error, data: Object) => void)\r\n    {\r\n        loader.loadText(this.getAbsolutePath(path),\r\n            (content) =>\r\n            {\r\n                var obj = JSON.parse(content);\r\n                callback(null, obj);\r\n            },\r\n            null,\r\n            (e) =>\r\n            {\r\n                callback(e, null);\r\n            });\r\n    }\r\n\r\n    /**\r\n     * 加载图片\r\n     * @param path 图片路径\r\n     * @param callback 加载完成回调\r\n     */\r\n    readImage(path: string, callback: (err: Error, img: HTMLImageElement) => void)\r\n    {\r\n        var img = new Image();\r\n        img.onload = () =>\r\n        {\r\n            callback(null, img);\r\n        };\r\n        img.onerror = (evt) =>\r\n        {\r\n            callback(new Error(`加载图片${path}失败`), null);\r\n        }\r\n        img.src = this.getAbsolutePath(path);\r\n    }\r\n\r\n    /**\r\n     * 获取文件绝对路径\r\n     * @param path （相对）路径\r\n     * @param callback 回调函数\r\n     */\r\n    getAbsolutePath(path: string)\r\n    {\r\n        return this.rootPath + path;\r\n    }\r\n}\r\n\r\n/**\r\n * 默认基础文件系统\r\n */\r\n export const basefs: IReadFS = new HttpFS();","import { globalEmitter } from \"@feng3d/event\";\r\nimport { dataTransform } from \"@feng3d/polyfill\";\r\nimport { _indexedDB } from \"./base/_IndexedDB\";\r\nimport { FSType } from \"./FSType\";\r\nimport { IReadWriteFS } from \"./IReadWriteFS\";\r\n\r\n/**\r\n * 用于是否为文件夹\r\n */\r\nconst directorytoken = \"!!!___directory___!!!\";\r\n\r\n/**\r\n * 索引数据文件系统\r\n */\r\nexport class IndexedDBFS implements IReadWriteFS\r\n{\r\n    get type()\r\n    {\r\n        return FSType.indexedDB;\r\n    }\r\n\r\n    /**\r\n     * 数据库名称\r\n     */\r\n    DBname: string;\r\n\r\n    /**\r\n     * 项目名称（表单名称）\r\n     */\r\n    projectname: string;\r\n\r\n    constructor(DBname = \"feng3d-editor\", projectname = \"testproject\")\r\n    {\r\n        this.DBname = DBname;\r\n        this.projectname = projectname;\r\n    }\r\n\r\n    /**\r\n     * 读取文件\r\n     * @param path 路径\r\n     * @param callback 读取完成回调 当err不为null时表示读取失败\r\n     */\r\n    readArrayBuffer(path: string, callback: (err: Error, data: ArrayBuffer) => void)\r\n    {\r\n        _indexedDB.objectStoreGet(this.DBname, this.projectname, path, (err, data) =>\r\n        {\r\n            if (err)\r\n            {\r\n                callback(err, data);\r\n                return;\r\n            }\r\n            if (data instanceof ArrayBuffer)\r\n            {\r\n                callback(null, data);\r\n            } else if (data instanceof Object)\r\n            {\r\n                var str = JSON.stringify(data, null, '\\t').replace(/[\\n\\t]+([\\d\\.e\\-\\[\\]]+)/g, '$1')\r\n                var arraybuffer = dataTransform.stringToArrayBuffer(str);\r\n                callback(null, arraybuffer);\r\n            } else\r\n            {\r\n                var arraybuffer = dataTransform.stringToArrayBuffer(data);\r\n                callback(null, arraybuffer);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 读取文件\r\n     * @param path 路径\r\n     * @param callback 读取完成回调 当err不为null时表示读取失败\r\n     */\r\n    readString(path: string, callback: (err: Error, data: string) => void)\r\n    {\r\n        _indexedDB.objectStoreGet(this.DBname, this.projectname, path, (err, data) =>\r\n        {\r\n            if (err)\r\n            {\r\n                callback(err, data);\r\n                return;\r\n            }\r\n            if (data instanceof ArrayBuffer)\r\n            {\r\n                dataTransform.arrayBufferToString(data, (str) =>\r\n                {\r\n                    callback(null, str);\r\n                });\r\n            } else if (data instanceof Object)\r\n            {\r\n                var str = JSON.stringify(data, null, '\\t').replace(/[\\n\\t]+([\\d\\.e\\-\\[\\]]+)/g, '$1')\r\n                callback(null, str);\r\n            } else\r\n            {\r\n                callback(null, data);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 读取文件\r\n     * @param path 路径\r\n     * @param callback 读取完成回调 当err不为null时表示读取失败\r\n     */\r\n    readObject(path: string, callback: (err: Error, data: object) => void)\r\n    {\r\n        _indexedDB.objectStoreGet(this.DBname, this.projectname, path, (err, data) =>\r\n        {\r\n            if (err)\r\n            {\r\n                callback(err, data);\r\n                return;\r\n            }\r\n            if (data instanceof ArrayBuffer)\r\n            {\r\n                dataTransform.arrayBufferToString(data, (str) =>\r\n                {\r\n                    var obj = JSON.parse(str);\r\n                    callback(null, obj);\r\n                });\r\n            } else if (data instanceof Object)\r\n            {\r\n                callback(null, data);\r\n            } else\r\n            {\r\n                console.assert(typeof data == \"string\");\r\n                var obj = JSON.parse(data);\r\n                callback(null, obj);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 加载图片\r\n     * @param path 图片路径\r\n     * @param callback 加载完成回调\r\n     */\r\n    readImage(path: string, callback: (err: Error, img: HTMLImageElement) => void)\r\n    {\r\n        this.readArrayBuffer(path, (err, data) =>\r\n        {\r\n            if (err)\r\n            {\r\n                callback(err, null);\r\n                return;\r\n            }\r\n            dataTransform.arrayBufferToImage(data, (img) =>\r\n            {\r\n                callback(null, img);\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 获取文件绝对路径\r\n     * @param path （相对）路径\r\n     * @param callback 回调函数\r\n     */\r\n    getAbsolutePath(path: string)\r\n    {\r\n        return path;\r\n    }\r\n\r\n    /**\r\n     * 是否为文件夹\r\n     *\r\n     * @param path 文件路径\r\n     * @param callback 完成回调\r\n     */\r\n    isDirectory(path: string, callback: (result: boolean) => void)\r\n    {\r\n        this.readString(path, (err, data) =>\r\n        {\r\n            callback(data == directorytoken);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 文件是否存在\r\n     * @param path 文件路径\r\n     * @param callback 回调函数\r\n     */\r\n    exists(path: string, callback: (exists: boolean) => void): void\r\n    {\r\n        _indexedDB.objectStoreGet(this.DBname, this.projectname, path, (err, data) =>\r\n        {\r\n            callback(!!data);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 读取文件夹中文件列表\r\n     * @param path 路径\r\n     * @param callback 回调函数\r\n     */\r\n    readdir(path: string, callback: (err: Error, files: string[]) => void): void\r\n    {\r\n        _indexedDB.getAllKeys(this.DBname, this.projectname, (err, allfilepaths) =>\r\n        {\r\n            if (!allfilepaths)\r\n            {\r\n                callback(err, null);\r\n                return;\r\n            }\r\n            var subfilemap = {};\r\n            allfilepaths.forEach(element =>\r\n            {\r\n                var dirp = path == \"\" ? path : (path + \"/\");\r\n                if (element.substr(0, dirp.length) == dirp && element != path)\r\n                {\r\n                    var result = element.substr(dirp.length);\r\n                    var subfile = result.split(\"/\").shift();\r\n                    subfilemap[subfile] = 1;\r\n                }\r\n            });\r\n            var files = Object.keys(subfilemap);\r\n            callback(null, files);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 新建文件夹\r\n     * @param path 文件夹路径\r\n     * @param callback 回调函数\r\n     */\r\n    mkdir(path: string, callback?: (err: Error) => void): void\r\n    {\r\n        this.exists(path, (exists) =>\r\n        {\r\n            if (exists)\r\n            {\r\n                callback(new Error(`文件夹${path}已存在无法新建`));\r\n                return;\r\n            }\r\n            _indexedDB.objectStorePut(this.DBname, this.projectname, path, directorytoken, callback);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 删除文件\r\n     * @param path 文件路径\r\n     * @param callback 回调函数\r\n     */\r\n    deleteFile(path: string, callback: (err: Error) => void)\r\n    {\r\n        // 删除文件\r\n        _indexedDB.objectStoreDelete(this.DBname, this.projectname, path, callback);\r\n        globalEmitter.emit(\"fs.delete\", path);\r\n    }\r\n\r\n    /**\r\n     * 写文件\r\n     * @param path 文件路径\r\n     * @param data 文件数据\r\n     * @param callback 回调函数\r\n     */\r\n    writeArrayBuffer(path: string, data: ArrayBuffer, callback?: (err: Error) => void)\r\n    {\r\n        _indexedDB.objectStorePut(this.DBname, this.projectname, path, data, callback);\r\n        globalEmitter.emit(\"fs.write\", path);\r\n    }\r\n\r\n    /**\r\n     * 写文件\r\n     * @param path 文件路径\r\n     * @param data 文件数据\r\n     * @param callback 回调函数\r\n     */\r\n    writeString(path: string, data: string, callback?: (err: Error) => void)\r\n    {\r\n        _indexedDB.objectStorePut(this.DBname, this.projectname, path, data, callback);\r\n        globalEmitter.emit(\"fs.write\", path);\r\n    }\r\n\r\n    /**\r\n     * 写文件\r\n     * @param path 文件路径\r\n     * @param object 文件数据\r\n     * @param callback 回调函数\r\n     */\r\n    writeObject(path: string, object: Object, callback?: (err: Error) => void)\r\n    {\r\n        _indexedDB.objectStorePut(this.DBname, this.projectname, path, object, callback);\r\n        globalEmitter.emit(\"fs.write\", path);\r\n    }\r\n\r\n    /**\r\n     * 写图片\r\n     * @param path 图片路径\r\n     * @param image 图片\r\n     * @param callback 回调函数\r\n     */\r\n    writeImage(path: string, image: HTMLImageElement, callback?: (err: Error) => void)\r\n    {\r\n        dataTransform.imageToArrayBuffer(image, (arraybuffer) =>\r\n        {\r\n            this.writeArrayBuffer(path, arraybuffer, callback);\r\n            globalEmitter.emit(\"fs.write\", path);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 复制文件\r\n     * @param src    源路径\r\n     * @param dest    目标路径\r\n     * @param callback 回调函数\r\n     */\r\n    copyFile(src: string, dest: string, callback?: (err: Error) => void)\r\n    {\r\n        _indexedDB.objectStoreGet(this.DBname, this.projectname, src, (err, data) =>\r\n        {\r\n            if (err)\r\n            {\r\n                callback(err);\r\n                return;\r\n            }\r\n            _indexedDB.objectStorePut(this.DBname, this.projectname, dest, data, callback);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 是否存在指定项目\r\n     * @param projectname 项目名称\r\n     * @param callback 回调函数\r\n     */\r\n    hasProject(projectname: string, callback: (has: boolean) => void)\r\n    {\r\n        _indexedDB.getObjectStoreNames(this.DBname, (err, objectStoreNames) =>\r\n        {\r\n            if (err) { callback(false); return; }\r\n            callback(objectStoreNames.indexOf(projectname) != -1);\r\n        });\r\n    }\r\n    /**\r\n     * 初始化项目\r\n     * @param projectname 项目名称\r\n     * @param callback 回调函数\r\n     */\r\n    initproject(projectname: string, callback: (err: Error) => void)\r\n    {\r\n        this.projectname = projectname;\r\n        _indexedDB.createObjectStore(this.DBname, projectname, callback);\r\n    }\r\n}\r\n\r\n/**\r\n * 索引数据文件系统\r\n */\r\nexport const indexedDBFS = new IndexedDBFS();\r\n","\r\n/**\r\n * 路径工具\r\n */\r\nexport class PathUtils\r\n{\r\n    /**\r\n     * 标准化文件夹路径\r\n     * @param path \r\n     */\r\n    normalizeDir(path: string): string\r\n    {\r\n        if (path[path.length - 1] == \"/\")\r\n            path = path.substr(0, path.length - 1);\r\n        return path;\r\n    }\r\n    /**\r\n     * 是否为HTTP地址\r\n     * \r\n     * @param path 地址\r\n     */\r\n    isHttpURL(path: string): any\r\n    {\r\n        if (path.indexOf(\"http://\") != -1 || path.indexOf(\"https://\") != -1 || path.indexOf(\"file:///\") != -1)\r\n            return true;\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * 获取不带后缀名称\r\n     * @param path 路径\r\n     */\r\n    getName(path: string)\r\n    {\r\n        console.assert(path != undefined);\r\n        var name = this.basename(path);\r\n        if (this.isDirectory(path))\r\n            return name;\r\n        name = name.split(\".\").shift();\r\n        return name;\r\n    }\r\n\r\n    /**\r\n     * 获取带后缀名称\r\n     * @param path 路径\r\n     */\r\n    basename(path: string)\r\n    {\r\n        console.assert(path != undefined);\r\n        var paths = path.split(\"/\");\r\n        var name = paths.pop();\r\n        if (name == \"\")\r\n            name = paths.pop();\r\n        return name;\r\n    }\r\n\r\n    /**\r\n     * 获取后缀\r\n     * @param path 路径\r\n     */\r\n    extname(path: string)\r\n    {\r\n        console.assert(path != undefined);\r\n        var name = this.basename(path);\r\n        var index = name.indexOf(\".\");\r\n        if (index == -1) return \"\";\r\n        return name.substr(index);\r\n    }\r\n\r\n    /**\r\n     * 父路径\r\n     * @param path 路径\r\n     */\r\n    dirname(path: string)\r\n    {\r\n        console.assert(path != undefined);\r\n        var paths = path.split(\"/\");\r\n        if (this.isDirectory(path))\r\n            paths.pop();\r\n        paths.pop();\r\n        return paths.join(\"/\");\r\n    }\r\n\r\n    /**\r\n     * 获取子文件（非文件夹）路径\r\n     * \r\n     * @param parentPath 父文件夹路径\r\n     * @param childName 子文件名称\r\n     */\r\n    getChildFilePath(parentPath: string, childName: string)\r\n    {\r\n        console.assert(parentPath != undefined);\r\n        console.assert(childName != undefined);\r\n\r\n        if (parentPath.charAt(parentPath.length - 1) != \"/\") parentPath += \"/\";\r\n        return parentPath + childName;\r\n    }\r\n\r\n    /**\r\n     * 获取子文件夹路径\r\n     * \r\n     * @param parentPath 父文件夹路径\r\n     * @param childFolderName 子文件夹名称\r\n     */\r\n    getChildFolderPath(parentPath: string, childFolderName: string)\r\n    {\r\n        if (parentPath.charAt(parentPath.length - 1) != \"/\") parentPath += \"/\";\r\n        if (childFolderName.charAt(childFolderName.length - 1) != \"/\") childFolderName += \"/\";\r\n\r\n        return parentPath + childFolderName;\r\n    }\r\n\r\n    /**\r\n     * 是否文件夹\r\n     * @param path 路径\r\n     */\r\n    isDirectory(path: string)\r\n    {\r\n        return path.split(\"/\").pop() == \"\";\r\n    }\r\n\r\n    /**\r\n     * 获取目录深度\r\n     * @param path 路径\r\n     */\r\n    getDirDepth(path: string)\r\n    {\r\n        var length = path.split(\"/\").length;\r\n        if (this.isDirectory(path))\r\n            length--;\r\n        return length - 1;\r\n    }\r\n}\r\n\r\n/**\r\n * 路径工具\r\n */\r\nexport const pathUtils = new PathUtils();\r\n","import { task } from \"@feng3d/task\";\r\nimport { FSType } from \"./FSType\";\r\nimport { basefs } from \"./HttpFS\";\r\nimport { IReadFS } from \"./IReadFS\";\r\n\r\n/**\r\n * 可读文件系统\r\n */\r\nexport class ReadFS\r\n{\r\n    /**\r\n     * 基础文件系统\r\n     */\r\n    get fs() { return this._fs || basefs; }\r\n    set fs(v) { this._fs = v; }\r\n    protected _fs: IReadFS;\r\n\r\n    /**\r\n     * 文件系统类型\r\n     */\r\n    get type(): FSType\r\n    {\r\n        return this.fs.type;\r\n    }\r\n\r\n    constructor(fs?: IReadFS)\r\n    {\r\n        this.fs = fs;\r\n    }\r\n\r\n    /**\r\n     * 读取文件为ArrayBuffer\r\n     * @param path 路径\r\n     * @param callback 读取完成回调 当err不为null时表示读取失败\r\n     */\r\n    readArrayBuffer(path: string, callback: (err: Error, arraybuffer: ArrayBuffer) => void)\r\n    {\r\n        this.fs.readArrayBuffer(path, callback);\r\n    }\r\n\r\n    /**\r\n     * 读取文件为字符串\r\n     * @param path 路径\r\n     * @param callback 读取完成回调 当err不为null时表示读取失败\r\n     */\r\n    readString(path: string, callback: (err: Error, str: string) => void)\r\n    {\r\n        this.fs.readString(path, callback);\r\n    }\r\n\r\n    /**\r\n     * 读取文件为Object\r\n     * @param path 路径\r\n     * @param callback 读取完成回调 当err不为null时表示读取失败\r\n     */\r\n    readObject(path: string, callback: (err: Error, object: Object) => void)\r\n    {\r\n        this.fs.readObject(path, callback);\r\n    }\r\n\r\n    /**\r\n     * 加载图片\r\n     * @param path 图片路径\r\n     * @param callback 加载完成回调\r\n     */\r\n    readImage(path: string, callback: (err: Error, img: HTMLImageElement) => void)\r\n    {\r\n        this.fs.readImage(path, callback);\r\n\r\n        // functionwrap.wrapF(this.fs, this.fs.readImage, [path], callback);\r\n    }\r\n\r\n    /**\r\n     * 获取文件绝对路径\r\n     * @param path （相对）路径\r\n     */\r\n    getAbsolutePath(path: string)\r\n    {\r\n        return this.fs.getAbsolutePath(path);\r\n    }\r\n\r\n    /**\r\n     * 读取文件列表为字符串列表\r\n     * \r\n     * @param path 路径\r\n     * @param callback 读取完成回调 当err不为null时表示读取失败\r\n     */\r\n    readStrings(paths: string[], callback: (strs: (string | Error)[]) => void)\r\n    {\r\n        task.parallelResults(paths, (path, callback) =>\r\n        {\r\n            this.readString(path, (err, str) =>\r\n            {\r\n                callback(err || str);\r\n            });\r\n        }, callback);\r\n    }\r\n\r\n    protected _images: { [path: string]: HTMLImageElement } = {};\r\n\r\n    private _state: { [eventtype: string]: true } = {};\r\n}\r\n\r\n/**\r\n * 默认文件系统\r\n */\r\nexport const fs = new ReadFS();\r\n","import { dataTransform } from \"@feng3d/polyfill\";\r\nimport { IReadWriteFS } from \"./IReadWriteFS\";\r\nimport { pathUtils } from \"./PathUtils\";\r\nimport { ReadFS } from \"./ReadFS\";\r\n\r\n/**\r\n * 可读写文件系统\r\n * \r\n * 扩展基础可读写文件系统\r\n */\r\nexport class ReadWriteFS extends ReadFS\r\n{\r\n    /**\r\n     * 项目名称（表单名称）\r\n     */\r\n    projectname: string;\r\n\r\n    get fs(): IReadWriteFS\r\n    {\r\n        return <any>this._fs;\r\n    }\r\n    set fs(value: IReadWriteFS)\r\n    {\r\n        this._fs = value;\r\n    }\r\n\r\n    constructor(fs?: IReadWriteFS)\r\n    {\r\n        super(fs);\r\n    }\r\n\r\n    /**\r\n     * 文件是否存在\r\n     * @param path 文件路径\r\n     * @param callback 回调函数\r\n     */\r\n    exists(path: string, callback: (exists: boolean) => void)\r\n    {\r\n        this.fs.exists(path, callback);\r\n    }\r\n\r\n    /**\r\n     * 读取文件夹中文件列表\r\n     * @param path 路径\r\n     * @param callback 回调函数\r\n     */\r\n    readdir(path: string, callback: (err: Error, files: string[]) => void)\r\n    {\r\n        this.fs.readdir(path, callback);\r\n    }\r\n\r\n    /**\r\n     * 新建文件夹\r\n     * @param path 文件夹路径\r\n     * @param callback 回调函数\r\n     */\r\n    mkdir(path: string, callback?: (err: Error) => void)\r\n    {\r\n        path = pathUtils.normalizeDir(path);\r\n\r\n        this.fs.exists(path, (exists) =>\r\n        {\r\n            if (exists)\r\n            {\r\n                callback && callback(null);\r\n                return;\r\n            }\r\n            this.fs.mkdir(path, callback);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 删除文件\r\n     * @param path 文件路径\r\n     * @param callback 回调函数\r\n     */\r\n    deleteFile(path: string, callback?: (err: Error) => void)\r\n    {\r\n        this.fs.deleteFile(path, callback);\r\n    }\r\n\r\n    /**\r\n     * 写(新建)文件\r\n     * 自动根据文件类型保存为对应结构\r\n     * \r\n     * @param path 文件路径\r\n     * @param arraybuffer 文件数据\r\n     * @param callback 回调函数\r\n     */\r\n    writeFile(path: string, arraybuffer: ArrayBuffer, callback?: (err: Error) => void)\r\n    {\r\n        var ext = pathUtils.extname(path);\r\n        ext = ext.split(\".\").pop();\r\n        var fileTypedic = { \"meta\": \"txt\", \"json\": \"object\", \"jpg\": \"arraybuffer\", \"png\": \"arraybuffer\", \"mp3\": \"arraybuffer\", \"js\": \"txt\", \"ts\": \"txt\", \"map\": \"txt\", \"html\": \"txt\" };\r\n        var type = fileTypedic[ext];\r\n        if (path == \"tsconfig.json\" || path == \".vscode/settings.json\")\r\n            type = \"txt\";\r\n\r\n        if (type == \"txt\")\r\n        {\r\n            dataTransform.arrayBufferToString(arraybuffer, (str) =>\r\n            {\r\n                this.fs.writeString(path, str, (err) =>\r\n                {\r\n                    callback(err);\r\n                });\r\n            });\r\n        } else if (type == \"object\")\r\n        {\r\n            dataTransform.arrayBufferToObject(arraybuffer, (obj) =>\r\n            {\r\n                this.fs.writeObject(path, obj, (err) =>\r\n                {\r\n                    callback(err);\r\n                });\r\n            });\r\n        } else if (type == \"arraybuffer\")\r\n        {\r\n            this.writeArrayBuffer(path, arraybuffer, (err) =>\r\n            {\r\n                callback(err);\r\n            });\r\n        } else\r\n        {\r\n            console.error(`无法导入文件 ${path}`)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 写ArrayBuffer(新建)文件\r\n     * @param path 文件路径\r\n     * @param arraybuffer 文件数据\r\n     * @param callback 回调函数\r\n     */\r\n    writeArrayBuffer(path: string, arraybuffer: ArrayBuffer, callback?: (err: Error) => void)\r\n    {\r\n        // 如果所属文件夹不存在则新建\r\n        var dirpath = pathUtils.dirname(path);\r\n        this.mkdir(dirpath, (err) =>\r\n        {\r\n            if (err)\r\n            {\r\n                callback && callback(err);\r\n                return;\r\n            }\r\n            this.fs.writeArrayBuffer(path, arraybuffer, callback);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 写字符串到(新建)文件\r\n     * @param path 文件路径\r\n     * @param str 文件数据\r\n     * @param callback 回调函数\r\n     */\r\n    writeString(path: string, str: string, callback?: (err: Error) => void)\r\n    {\r\n        // 如果所属文件夹不存在则新建\r\n        var dirpath = pathUtils.dirname(path);\r\n        this.mkdir(dirpath, (err) =>\r\n        {\r\n            if (err)\r\n            {\r\n                callback && callback(err);\r\n                return;\r\n            }\r\n            this.fs.writeString(path, str, callback);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 写Object到(新建)文件\r\n     * @param path 文件路径\r\n     * @param object 文件数据\r\n     * @param callback 回调函数\r\n     */\r\n    writeObject(path: string, object: Object, callback?: (err: Error) => void)\r\n    {\r\n        // 如果所属文件夹不存在则新建\r\n        var dirpath = pathUtils.dirname(path);\r\n        this.mkdir(dirpath, (err) =>\r\n        {\r\n            if (err)\r\n            {\r\n                callback && callback(err);\r\n                return;\r\n            }\r\n            this.fs.writeObject(path, object, callback);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 写图片\r\n     * @param path 图片路径\r\n     * @param image 图片\r\n     * @param callback 回调函数\r\n     */\r\n    writeImage(path: string, image: HTMLImageElement, callback?: (err: Error) => void)\r\n    {\r\n        // 如果所属文件夹不存在则新建\r\n        var dirpath = pathUtils.dirname(path);\r\n        this.mkdir(dirpath, (err) =>\r\n        {\r\n            if (err)\r\n            {\r\n                callback && callback(err);\r\n                return;\r\n            }\r\n            this.fs.writeImage(path, image, callback);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 复制文件\r\n     * @param src    源路径\r\n     * @param dest    目标路径\r\n     * @param callback 回调函数\r\n     */\r\n    copyFile(src: string, dest: string, callback?: (err: Error) => void)\r\n    {\r\n        this.fs.copyFile(src, dest, callback);\r\n    }\r\n\r\n    /**\r\n     * 是否为文件夹\r\n     *\r\n     * @param path 文件路径\r\n     * @param callback 完成回调\r\n     */\r\n    isDirectory(path: string, callback: (result: boolean) => void)\r\n    {\r\n        this.fs.isDirectory(path, callback);\r\n    }\r\n\r\n    /**\r\n     * 初始化项目\r\n     * @param projectname 项目名称\r\n     * @param callback 回调函数\r\n     */\r\n    initproject(projectname: string, callback: (err: Error) => void)\r\n    {\r\n        this.fs.initproject(projectname, callback);\r\n    }\r\n\r\n    /**\r\n     * 是否存在指定项目\r\n     * @param projectname 项目名称\r\n     * @param callback 回调函数\r\n     */\r\n    hasProject(projectname: string, callback: (has: boolean) => void)\r\n    {\r\n        this.fs.hasProject(projectname, callback);\r\n    }\r\n\r\n    /**\r\n     * 获取指定文件下所有文件路径列表\r\n     */\r\n    getAllPathsInFolder(dirpath = \"\", callback: (err: Error, filepaths: string[]) => void): void\r\n    {\r\n        var dirs = [dirpath];\r\n        var result = [];\r\n        var currentdir = \"\";\r\n\r\n        // 递归获取文件\r\n        var handle = () =>\r\n        {\r\n            if (dirs.length > 0)\r\n            {\r\n                currentdir = dirs.shift();\r\n                this.readdir(currentdir, (err, files) =>\r\n                {\r\n                    // 获取子文件路径\r\n                    var getChildPath = () =>\r\n                    {\r\n                        if (files.length == 0)\r\n                        {\r\n                            handle();\r\n                            return;\r\n                        }\r\n                        var childpath = currentdir + (currentdir == \"\" ? \"\" : \"/\") + files.shift();\r\n                        result.push(childpath);\r\n                        this.isDirectory(childpath, result =>\r\n                        {\r\n                            if (result) dirs.push(childpath);\r\n                            getChildPath();\r\n                        });\r\n                    };\r\n                    getChildPath();\r\n                });\r\n            } else\r\n            {\r\n                callback(null, result);\r\n            }\r\n        }\r\n        handle();\r\n    }\r\n\r\n    /**\r\n     * 移动文件\r\n     * @param src 源路径\r\n     * @param dest 目标路径\r\n     * @param callback 回调函数\r\n     */\r\n    moveFile(src: string, dest: string, callback?: (err: Error) => void)\r\n    {\r\n        this.copyFile(src, dest, (err) =>\r\n        {\r\n            if (err)\r\n            {\r\n                callback && callback(err);\r\n                return;\r\n            }\r\n            this.deleteFile(src, callback);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 重命名文件\r\n     * @param oldPath 老路径\r\n     * @param newPath 新路径\r\n     * @param callback 回调函数\r\n     */\r\n    renameFile(oldPath: string, newPath: string, callback?: (err: Error) => void): void\r\n    {\r\n        this.moveFile(oldPath, newPath, callback);\r\n    }\r\n\r\n    /**\r\n     * 移动一组文件\r\n     * @param movelists 移动列表\r\n     * @param callback 回调函数\r\n     */\r\n    moveFiles(movelists: [string, string][], callback?: (err: Error) => void)\r\n    {\r\n        this.copyFiles(movelists.concat(), (err) =>\r\n        {\r\n            if (err)\r\n            {\r\n                callback && callback(err);\r\n                return;\r\n            }\r\n            var deletelists = movelists.reduce((value: string[], current) => { value.push(current[0]); return value; }, [])\r\n            this.deleteFiles(deletelists, callback);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 复制一组文件\r\n     * @param copylists 复制列表\r\n     * @param callback 回调函数\r\n     */\r\n    copyFiles(copylists: [string, string][], callback?: (err: Error) => void)\r\n    {\r\n        if (copylists.length > 0)\r\n        {\r\n            var copyitem: [string, string] = <any>copylists.shift();\r\n            this.copyFile(copyitem[0], copyitem[1], (err) =>\r\n            {\r\n                if (err)\r\n                {\r\n                    callback && callback(err);\r\n                    return;\r\n                }\r\n                this.copyFiles(copylists, callback);\r\n            });\r\n            return;\r\n        }\r\n        callback && callback(null);\r\n    }\r\n\r\n    /**\r\n     * 删除一组文件\r\n     * @param deletelists 删除列表\r\n     * @param callback 回调函数\r\n     */\r\n    deleteFiles(deletelists: string[], callback?: (err: Error) => void)\r\n    {\r\n        if (deletelists.length > 0)\r\n        {\r\n            this.deleteFile(<string>deletelists.shift(), (err) =>\r\n            {\r\n                if (err)\r\n                {\r\n                    callback && callback(err);\r\n                    return;\r\n                }\r\n                this.deleteFiles(deletelists, callback);\r\n            });\r\n            return;\r\n        }\r\n        callback && callback(null);\r\n    }\r\n\r\n    /**\r\n     * 重命名文件(夹)\r\n     * @param oldPath 老路径\r\n     * @param newPath 新路径\r\n     * @param callback 回调函数\r\n     */\r\n    rename(oldPath: string, newPath: string, callback?: (err: Error) => void): void\r\n    {\r\n        this.isDirectory(oldPath, result =>\r\n        {\r\n            if (result)\r\n            {\r\n                this.getAllPathsInFolder(oldPath, (err, filepaths) =>\r\n                {\r\n                    if (err)\r\n                    {\r\n                        callback && callback(err);\r\n                        return;\r\n                    }\r\n                    var renamelists: [string, string][] = [[oldPath, newPath]];\r\n                    filepaths.forEach(element =>\r\n                    {\r\n                        renamelists.push([element, element.replace(oldPath, newPath)]);\r\n                    });\r\n                    this.moveFiles(renamelists, callback);\r\n                });\r\n            } else\r\n            {\r\n                this.renameFile(oldPath, newPath, callback);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 移动文件(夹)\r\n     * \r\n     * @param src 源路径\r\n     * @param dest 目标路径\r\n     * @param callback 回调函数\r\n     */\r\n    move(src: string, dest: string, callback?: (err?: Error) => void): void\r\n    {\r\n        this.rename(src, dest, callback);\r\n    }\r\n\r\n    /**\r\n     * 删除文件(夹)\r\n     * @param path 路径\r\n     * @param callback 回调函数\r\n     */\r\n    delete(path: string, callback?: (err: Error) => void): void\r\n    {\r\n        this.isDirectory(path, result =>\r\n        {\r\n            if (result)\r\n            {\r\n                this.getAllPathsInFolder(path, (err, filepaths) =>\r\n                {\r\n                    if (err)\r\n                    {\r\n                        callback && callback(err);\r\n                        return;\r\n                    }\r\n                    var removelists: string[] = filepaths.concat(path);\r\n                    this.deleteFiles(removelists, callback);\r\n                });\r\n            } else\r\n            {\r\n                this.deleteFile(path, callback);\r\n            }\r\n        });\r\n    }\r\n}\r\n"],"names":["LoaderDataFormat","this","let","FSType","const","dataTransform","globalEmitter","prototypeAccessors","task","super"],"mappings":";;;;;;;;;;IACA;;;IAGA,WAAY,gBAAgB;;;;QAKxB,qCAAiB,CAAA;;;;QAIjB,iCAAa,CAAA;;;;QAIb,mCAAe,CAAA;IACnB,CAAC,EAdWA,wBAAgB,KAAhBA,wBAAgB;;ICF5B;;;AAGA,QAAa,MAAM;;qBAOf,8BAAS,GAAW,EAAE,WAAuC,EAAE,iBAA8B,EAAE,OAA4B;QAEvH,kBAAkB,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,UAAU,EAAEA,wBAAgB,CAAC,IAAI,EAAE,WAAW,EAAO,WAAW,EAAE,UAAU,EAAE,iBAAiB,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;IACxJ,EAAC;IAED;;;;qBAIA,kCAAW,GAAW,EAAE,WAA4C,EAAE,iBAA8B,EAAE,OAA4B;QAE9H,kBAAkB,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,UAAU,EAAEA,wBAAgB,CAAC,MAAM,EAAE,WAAW,EAAO,WAAW,EAAE,UAAU,EAAE,iBAAiB,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;IAC1J,EAAC;IAED;;;;qBAIA,gCAAU,GAAW,EAAE,WAAiD,EAAE,iBAA8B,EAAE,OAA4B;QAElI,IAAI,KAAK,GAAG,IAAI,KAAK,EAAE,CAAC;QACxB,KAAK,CAAC,WAAW,GAAG,WAAW,CAAC;QAChC,KAAK,CAAC,MAAM,aAAI,KAAK;YAEjB,WAAW,IAAI,WAAW,CAAC,KAAK,CAAC,CAAC;SACrC,CAAA;QACD,KAAK,CAAC,OAAO,aAAI,KAAK;YAElB,OAAO,CAAC,KAAK,CAAC,sCAAsC,GAAG,GAAG,CAAC,CAAC;;YAE5D,KAAK,CAAC,GAAG,GAAG,guHAAguH,CAAC;;YAE7uH,IAAI,GAAG,GAAG,IAAI,KAAK,CAAC,GAAG,GAAG,QAAQ,CAAC,CAAC;YACpC,OAAO,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC;SAC3B,CAAA;QACD,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC;IACpB,EACH;IAED;;;AAGA,QAAa,MAAM,GAAG,IAAI,MAAM,EAAE,CAAC;IAWnC;;;;;IAKA,SAAS,kBAAkB,CAAC,QAAkB;QAE1C,IAAI,OAAO,GAAG,IAAI,cAAc,EAAE,CAAC;QACnC,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;QACxC,OAAO,CAAC,gBAAgB,CAAC,6BAA6B,EAAE,GAAG,CAAC,CAAC;QAC7D,OAAO,CAAC,YAAY,GAAG,QAAQ,CAAC,UAAU,IAAIA,wBAAgB,CAAC,MAAM,GAAG,aAAa,GAAG,EAAE,CAAC;QAC3F,OAAO,CAAC,kBAAkB,GAAG,yBAAyB,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;QAC1E,OAAO,CAAC,UAAU,GAAG,iBAAiB,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;QAC1D,OAAO,CAAC,IAAI,EAAE,CAAC;IACnB,CAAC;IAED;;;IAGA,SAAS,iBAAiB,CAAC,OAAuB,EAAE,QAAkB;QAElE,iBAAQ,KAAoB;YAExB,QAAQ,CAAC,UAAU,IAAI,QAAQ,CAAC,UAAU,CAAC,KAAK,CAAC,MAAM,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC;SACzE,CAAA;IACL,CAAC;IAED;;;IAGA,SAAS,yBAAyB,CAAC,OAAuB,EAAE,QAAkB;QAE1E,iBAAQ,EAAE;YAEN,IAAI,OAAO,CAAC,UAAU,IAAI,CAAC,EAC3B;gBAEI,OAAO,CAAC,kBAAkB,GAAQ,IAAI,CAAC;gBAEvC,IAAI,OAAO,CAAC,MAAM,IAAI,GAAG,IAAI,OAAO,CAAC,MAAM,GAAG,GAAG,EACjD;oBACI,IAAI,OAAO,GAAG,QAAQ,CAAC,UAAU,IAAIA,wBAAgB,CAAC,IAAI,GAAG,OAAO,CAAC,YAAY,GAAG,OAAO,CAAC,QAAQ,CAAC;oBACrG,QAAQ,CAAC,WAAW,IAAI,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;iBACzD;qBACD;oBACI,IAAI,GAAG,GAAG,IAAI,KAAK,CAAC,QAAQ,CAAC,GAAG,GAAG,QAAQ,CAAC,CAAC;oBAC7C,QAAQ,CAAC,OAAO,IAAI,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;oBAC1C,QAAQ,CAAC,WAAW,IAAI,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;iBACtD;aACJ;SACJ,CAAA;IACL,CAAC;;ICnHD,IAAI,SAAS,GAAoC,EAAE,CAAC;IAEpD;;;AAGA,QAAa,UAAU,GAAvB;;;;QAKY,cAAS,GAeb,EAAE,CAAC;IAiWX,EAAC;IA/VG;;;yBAGA;QAEI,IAAI,OAAO,SAAS,IAAI,WAAW,EACnC;YACI,SAAS,GAAG,MAAM,CAAC,SAAS,IAAI,MAAM,CAAC,cAAc,CAAC,IAAI,MAAM,CAAC,iBAAiB,CAAC,IAAI,MAAM,CAAC,aAAa,CAAC,CAAC;YAE7G,IAAI,SAAS,IAAI,SAAS,EAC1B;gBACI,OAAO,KAAK,CAAC;aAChB;SACJ;QACD,OAAO,IAAI,CAAC;IAChB,EAAC;IAED;;;;;;yBAMA,oCAAY,MAAc,EAAE,QAAmD;QAE3E,IAAI,SAAS,CAAC,MAAM,CAAC,EACrB;YACI,QAAQ,CAAC,IAAI,EAAE,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;YAClC,OAAO;SACV;QAED,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;IACjC,EAAC;IAED;;;;;;;;yBAQQ,wBAAM,MAAc,EAAE,QAAmD,EAAE,OAAe,EAAE,SAA8C;;6CAAxD,GAAG;;QAEzF,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;cAAE,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,EAAE,MAAM,EAAE,QAAQ,CAAC,MAAM,EAAE,kBAAkB,EAAE,EAAE,EAAE,wBAAwB,EAAE,EAAE,EAAE,GAAC;QAExI,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,kBAAkB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACzD,IAAI,OAAO,EACX;YACI,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;YAC5B,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,wBAAwB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SACnE;QACD,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,MAAM,IAAI,QAAQ,CAAC,OAAO,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,MAAM,IAAI,QAAQ,CAAC,SAAS;cAAE,SAAO;QAErH,IAAI,OAAyB,CAAC;QAC9B,IAAI,CAAC,OAAO,EACZ;YACI,OAAO,GAAG,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACjC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,MAAM,GAAG,QAAQ,CAAC,OAAO,CAAC;SACpD;aACD;YACI,IAAI,WAAW,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC;YACpC,WAAW,CAAC,KAAK,EAAE,CAAC;YACpB,OAAO,SAAS,CAAC,MAAM,CAAC,CAAC;YAEzB,OAAO,GAAG,SAAS,CAAC,IAAI,CAAC,MAAM,EAAE,WAAW,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;YAC1D,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,MAAM,GAAG,QAAQ,CAAC,SAAS,CAAC;SACtD;QAED,OAAO,CAAC,eAAe,aAAI,KAAK;YAE5B,IAAI,WAAW,GAAgB,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;YACtD,OAAO,CAAC,eAAe,GAAG,IAAI,CAAC;YAE/B,IAAI,SAAS,GAAGC,MAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,wBAAwB,CAAC,MAAM,EAAE,CAAC;YACzEA,MAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,wBAAwB,CAAC,MAAM,GAAG,CAAC,CAAC;YAC3D,SAAS,CAAC,OAAO,WAAC;gBAEd,OAAO,CAAC,WAAW,CAAC,CAAC;aACxB,CAAC,CAAC;SACN,CAAA;QACD,OAAO,CAAC,SAAS,aAAI,KAAK;YAEtB,SAAS,CAAC,MAAM,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;YAC3C,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC;YAEzBA,MAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;YAEhD,IAAI,SAAS,GAAGA,MAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,kBAAkB,CAAC,MAAM,EAAE,CAAC;YACnEA,MAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,kBAAkB,CAAC,MAAM,GAAG,CAAC,CAAC;YACrD,SAAS,CAAC,OAAO,WAAC;gBAEd,OAAO,CAAC,IAAI,EAAE,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;aACpC,CAAC,CAAC;SACN,CAAC;QACF,OAAO,CAAC,OAAO,aAAI,KAAK;YAEpB,OAAO,CAAC,OAAO,GAAG,IAAI,CAAC;YAEvBA,MAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,MAAM,GAAG,QAAQ,CAAC,KAAK,CAAC;YAE/C,IAAI,SAAS,GAAGA,MAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,kBAAkB,CAAC,MAAM,EAAE,CAAC;YACnEA,MAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,kBAAkB,CAAC,MAAM,GAAG,CAAC,CAAC;YACrD,SAAS,CAAC,OAAO,WAAC;gBAEd,OAAO,CAAM,KAAK,EAAO,IAAI,CAAC,CAAC;aAClC,CAAC,CAAC;SACN,CAAC;IACN,EAAC;IAED;;;;;;yBAMA,0CAAe,MAAc,EAAE,QAA6B;QAExD,IAAI,OAAO,GAAG,SAAS,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;QAC/C,OAAO,CAAC,SAAS,GAAG,UAAU,KAAK;YAE/B,OAAO,SAAS,CAAC,MAAM,CAAC,CAAC;YACzB,QAAQ,IAAI,QAAQ,CAAC,IAAI,CAAC,CAAC;YAC3B,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC;SAC5B,CAAC;QACF,OAAO,CAAC,OAAO,GAAG,UAAU,KAAK;YAE7B,QAAQ,IAAI,QAAQ,CAAC,KAAK,CAAC,CAAC;YAC5B,OAAO,CAAC,OAAO,GAAG,IAAI,CAAC;SAC1B,CAAC;IACN,EAAC;IAED;;;;;;;yBAOA,0CAAe,MAAc,EAAE,gBAAwB,EAAE,QAAgC;QAErF,IAAI,CAAC,WAAW,CAAC,MAAM,YAAG,GAAG,EAAE,QAAQ;YAEnC,QAAQ,CAAC,QAAQ,CAAC,gBAAgB,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC,CAAC;SAClE,CAAC,CAAC;IACP,EAAC;IAED;;;;;;yBAMA,oDAAoB,MAAc,EAAE,QAAiE;QAEjG,IAAI,CAAC,WAAW,CAAC,MAAM,YAAG,GAAG,EAAE,QAAQ;YAEnC,IAAI,gBAAgB,GAAa,EAAE,CAAC;YACpC,KAAKC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,gBAAgB,CAAC,MAAM,EAAE,CAAC,EAAE,EACzD;gBACI,gBAAgB,CAAC,IAAI,CAAS,QAAQ,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;aACpE;YACD,QAAQ,CAAC,IAAI,EAAE,gBAAgB,CAAC,CAAA;SACnC,CAAC,CAAC;IACP,EAAC;IAED;;;;;;;yBAOA,gDAAkB,MAAc,EAAE,gBAAwB,EAAE,QAA6B;;;QAErF,IAAI,CAAC,WAAW,CAAC,MAAM,YAAG,GAAG,EAAE,QAAQ;YAEnC,IAAI,QAAQ,CAAC,gBAAgB,CAAC,QAAQ,CAAC,gBAAgB,CAAC,EACxD;gBACI,QAAQ,IAAI,QAAQ,CAAC,IAAI,CAAC,CAAC;gBAC3B,OAAO;aACV;YAEDD,MAAI,CAAC,KAAK,CAAC,MAAM,EAAE,QAAQ,EAAE,IAAI,YAAG,WAAwB;gBAExD,WAAW,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,CAAC;aACnD,CAAC,CAAC;SACN,CAAC,CAAC;IACP,EAAC;IAED;;;;;;;yBAOA,gDAAkB,MAAc,EAAE,gBAAwB,EAAE,QAA6B;;;QAErF,IAAI,CAAC,WAAW,CAAC,MAAM,YAAG,GAAG,EAAE,QAAQ;YAEnC,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,QAAQ,CAAC,gBAAgB,CAAC,EACzD;gBACI,QAAQ,IAAI,QAAQ,CAAC,IAAI,CAAC,CAAC;gBAC3B,OAAO;aACV;YACDA,MAAI,CAAC,KAAK,CAAC,MAAM,EAAE,QAAQ,EAAE,IAAI,YAAG,WAAwB;gBAExD,WAAW,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,CAAC;aACnD,CAAC,CAAC;SACN,CAAC,CAAC;IACP,EAAC;IAED;;;;;;;yBAOA,kCAAW,MAAc,EAAE,gBAAwB,EAAE,QAA+C;QAEhG,IAAI,CAAC,WAAW,CAAC,MAAM,YAAG,GAAG,EAAE,QAAQ;YAEnC,IACA;gBACI,IAAI,WAAW,GAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,gBAAgB,CAAC,EAAE,WAAW,CAAC,CAAC;gBACxE,IAAI,WAAW,GAAG,WAAW,CAAC,WAAW,CAAC,gBAAgB,CAAC,CAAC;gBAC5D,IAAI,OAAO,GAAG,WAAW,CAAC,UAAU,EAAE,CAAC;gBACvC,OAAO,CAAC,SAAS,GAAG,UAAU,KAAK;oBAE/B,QAAQ,IAAI,QAAQ,CAAC,IAAI,EAAE,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;oBACnD,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC;iBAC5B,CAAC;aACL;YAAC,OAAO,KAAK,EACd;gBACI,QAAQ,IAAI,QAAQ,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;aACrC;SACJ,CAAC,CAAC;IACP,EAAC;IAED;;;;;;;;yBAQA,0CAAe,MAAc,EAAE,gBAAwB,EAAE,GAAoB,EAAE,QAA0C;QAErH,IAAI,CAAC,WAAW,CAAC,MAAM,YAAG,GAAG,EAAE,QAAQ;YAEnC,IAAI,WAAW,GAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,gBAAgB,CAAC,EAAE,WAAW,CAAC,CAAC;YACxE,IAAI,WAAW,GAAG,WAAW,CAAC,WAAW,CAAC,gBAAgB,CAAC,CAAC;YAC5D,IAAI,OAAO,GAAG,WAAW,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YACnC,OAAO,CAAC,SAAS,GAAG,UAAU,KAAK;gBAE/B,IAAI,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;gBACpC,QAAQ,IAAI,QAAQ,CAAC,MAAM,IAAI,IAAI,GAAG,IAAI,GAAG,IAAI,KAAK,cAAW,KAAM,EAAE,MAAM,CAAC,CAAC;gBACjF,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC;aAC5B,CAAC;SACL,CAAC,CAAC;IACP,EAAC;IAED;;;;;;;;;yBASA,0CAAe,MAAc,EAAE,gBAAwB,EAAE,GAAoB,EAAE,IAAS,EAAE,QAA+B;QAErH,IAAI,CAAC,WAAW,CAAC,MAAM,YAAG,GAAG,EAAE,QAAQ;YAEnC,IACA;gBACI,IAAI,WAAW,GAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,gBAAgB,CAAC,EAAE,WAAW,CAAC,CAAC;gBACxE,IAAI,WAAW,GAAG,WAAW,CAAC,WAAW,CAAC,gBAAgB,CAAC,CAAC;gBAC5D,IAAI,OAAO,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;gBACzC,OAAO,CAAC,SAAS,GAAG,UAAU,KAAK;oBAE/B,QAAQ,IAAI,QAAQ,CAAC,IAAI,CAAC,CAAC;oBAC3B,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC;iBAC5B,CAAC;aACL;YAAC,OAAO,KAAK,EACd;gBACI,QAAQ,IAAI,QAAQ,CAAC,KAAK,CAAC,CAAC;aAC/B;SACJ,CAAC,CAAC;IACP,EAAC;IAED;;;;;;;;yBAQA,gDAAkB,MAAc,EAAE,gBAAwB,EAAE,GAAoB,EAAE,QAAgC;QAE9G,IAAI,CAAC,WAAW,CAAC,MAAM,YAAG,GAAG,EAAE,QAAQ;YAEnC,IACA;gBACI,IAAI,WAAW,GAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,gBAAgB,CAAC,EAAE,WAAW,CAAC,CAAC;gBACxE,IAAI,WAAW,GAAG,WAAW,CAAC,WAAW,CAAC,gBAAgB,CAAC,CAAC;gBAC5D,IAAI,OAAO,GAAG,WAAW,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;gBACtC,OAAO,CAAC,SAAS,GAAG,UAAU,KAAK;oBAE/B,QAAQ,IAAI,QAAQ,EAAE,CAAC;oBACvB,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC;iBAC5B,CAAC;aACL;YAAC,OAAO,KAAK,EACd;gBACI,QAAQ,IAAI,QAAQ,CAAC,KAAK,CAAC,CAAC;aAC/B;SACJ,CAAC,CAAC;IACP,EAAC;IAED;;;;;;;yBAOA,8CAAiB,MAAc,EAAE,gBAAwB,EAAE,QAAgC;QAEvF,IAAI,CAAC,WAAW,CAAC,MAAM,YAAG,GAAG,EAAE,QAAQ;YAEnC,IACA;gBACI,IAAI,WAAW,GAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,gBAAgB,CAAC,EAAE,WAAW,CAAC,CAAC;gBACxE,IAAI,WAAW,GAAG,WAAW,CAAC,WAAW,CAAC,gBAAgB,CAAC,CAAC;gBAC5D,IAAI,OAAO,GAAG,WAAW,CAAC,KAAK,EAAE,CAAC;gBAClC,OAAO,CAAC,SAAS,GAAG,UAAU,KAAK;oBAE/B,QAAQ,IAAI,QAAQ,EAAE,CAAC;oBACvB,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC;iBAC5B,CAAC;aACL;YAAC,OAAO,KAAK,EACd;gBACI,QAAQ,IAAI,QAAQ,CAAC,KAAK,CAAC,CAAC;aAC/B;SACJ,CAAC,CAAC;IACP,EACH;IAED;;;AAGA,QAAa,UAAU,GAAG,IAAI,UAAU,EAAE,CAAC;IAE3C;;;IAGA,IAAK,QA0BJ;IA1BD,WAAK,QAAQ;;;;QAKT,2CAAM,CAAA;;;;QAKN,6CAAO,CAAA;;;;QAKP,2CAAM,CAAA;;;;QAKN,iDAAS,CAAA;;;;QAKT,yCAAK,CAAA;IACT,CAAC,EA1BI,QAAQ,KAAR,QAAQ,QA0BZ;;IC9ZD;;;AAGA,IAAA,WAAY,MAAM;QAEd,uBAAa,CAAA;QACb,2BAAiB,CAAA;QACjB,iCAAuB,CAAA;IAC3B,CAAC,EALWE,cAAM,KAANA,cAAM,QAKjB;;ICLD;;;AAGA,QAAa,MAAM,GASf,gBAAY,QAAa;2CAAL,GAAG;;;;;QAJvB,aAAQ,GAAG,EAAE,CAAC;QAEd,SAAI,GAAGA,cAAM,CAAC,IAAI,CAAC;QAIf,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,IAAI,CAAC,QAAQ,IAAI,EAAE,EACvB;YACI,IAAI,OAAO,QAAQ,IAAI,WAAW,EAClC;gBACI,IAAI,GAAG,GAAG,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,CAAC;gBAC1C,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,SAAS,CAAC,CAAC,EAAE,GAAG,CAAC,WAAW,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;aAC9D;SACJ;IACL,EAAC;IAED;;;;;qBAKA,4CAAgB,IAAY,EAAE,QAAiD;;QAG3E,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,YACvC,OAAO;YAEJ,QAAQ,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;SAC3B,EACD,IAAI,YACH,CAAC;YAEE,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;SACrB,CAAC,CAAC;IACX,EAAC;IAED;;;;;qBAKA,kCAAW,IAAY,EAAE,QAA4C;QAEjE,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,YACrC,OAAO;YAEJ,QAAQ,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;SAC3B,EACD,IAAI,YACH,CAAC;YAEE,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;SACrB,CAAC,CAAC;IACX,EAAC;IAED;;;;;qBAKA,kCAAW,IAAY,EAAE,QAA4C;QAEjE,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,YACrC,OAAO;YAEJ,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;YAC9B,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;SACvB,EACD,IAAI,YACH,CAAC;YAEE,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;SACrB,CAAC,CAAC;IACX,EAAC;IAED;;;;;qBAKA,gCAAU,IAAY,EAAE,QAAqD;QAEzE,IAAI,GAAG,GAAG,IAAI,KAAK,EAAE,CAAC;QACtB,GAAG,CAAC,MAAM;YAEN,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;SACvB,CAAC;QACF,GAAG,CAAC,OAAO,aAAI,GAAG;YAEd,QAAQ,CAAC,IAAI,KAAK,WAAQ,IAAI,SAAK,EAAE,IAAI,CAAC,CAAC;SAC9C,CAAA;QACD,GAAG,CAAC,GAAG,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;IACzC,EAAC;IAED;;;;;qBAKA,4CAAgB,IAAY;QAExB,OAAO,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;IAChC,EACH;IAED;;;AAGC,IAAOC,IAAM,MAAM,GAAY,IAAI,MAAM,EAAE,CAAC;;ICnH7C;;;IAGAA,IAAM,cAAc,GAAG,uBAAuB,CAAC;IAE/C;;;AAGA,QAAa,WAAW,GAiBpB,qBAAY,MAAwB,EAAE,WAA2B;uCAA/C,GAAG;iDAA4B,GAAG;;QAEhD,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;IACnC;;8DAAC;IAnBD,mBAAI;QAEA,OAAOD,cAAM,CAAC,SAAS,CAAC;IAC5B,EAAC;IAkBD;;;;;0BAKA,4CAAgB,IAAY,EAAE,QAAiD;QAE3E,UAAU,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,YAAG,GAAG,EAAE,IAAI;YAErE,IAAI,GAAG,EACP;gBACI,QAAQ,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;gBACpB,OAAO;aACV;YACD,IAAI,IAAI,YAAY,WAAW,EAC/B;gBACI,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;aACxB;iBAAM,IAAI,IAAI,YAAY,MAAM,EACjC;gBACI,IAAI,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,OAAO,CAAC,0BAA0B,EAAE,IAAI,CAAC,CAAA;gBACpF,IAAI,WAAW,GAAGE,sBAAa,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC;gBACzD,QAAQ,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;aAC/B;iBACD;gBACI,IAAI,WAAW,GAAGA,sBAAa,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC;gBAC1D,QAAQ,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;aAC/B;SACJ,CAAC,CAAC;IACP,EAAC;IAED;;;;;0BAKA,kCAAW,IAAY,EAAE,QAA4C;QAEjE,UAAU,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,YAAG,GAAG,EAAE,IAAI;YAErE,IAAI,GAAG,EACP;gBACI,QAAQ,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;gBACpB,OAAO;aACV;YACD,IAAI,IAAI,YAAY,WAAW,EAC/B;gBACIA,sBAAa,CAAC,mBAAmB,CAAC,IAAI,YAAG,GAAG;oBAExC,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;iBACvB,CAAC,CAAC;aACN;iBAAM,IAAI,IAAI,YAAY,MAAM,EACjC;gBACI,IAAI,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,OAAO,CAAC,0BAA0B,EAAE,IAAI,CAAC,CAAA;gBACpF,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;aACvB;iBACD;gBACI,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;aACxB;SACJ,CAAC,CAAC;IACP,EAAC;IAED;;;;;0BAKA,kCAAW,IAAY,EAAE,QAA4C;QAEjE,UAAU,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,YAAG,GAAG,EAAE,IAAI;YAErE,IAAI,GAAG,EACP;gBACI,QAAQ,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;gBACpB,OAAO;aACV;YACD,IAAI,IAAI,YAAY,WAAW,EAC/B;gBACIA,sBAAa,CAAC,mBAAmB,CAAC,IAAI,YAAG,GAAG;oBAExC,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;oBAC1B,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;iBACvB,CAAC,CAAC;aACN;iBAAM,IAAI,IAAI,YAAY,MAAM,EACjC;gBACI,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;aACxB;iBACD;gBACI,OAAO,CAAC,MAAM,CAAC,OAAO,IAAI,IAAI,QAAQ,CAAC,CAAC;gBACxC,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;gBAC3B,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;aACvB;SACJ,CAAC,CAAC;IACP,EAAC;IAED;;;;;0BAKA,gCAAU,IAAY,EAAE,QAAqD;QAEzE,IAAI,CAAC,eAAe,CAAC,IAAI,YAAG,GAAG,EAAE,IAAI;YAEjC,IAAI,GAAG,EACP;gBACI,QAAQ,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;gBACpB,OAAO;aACV;YACDA,sBAAa,CAAC,kBAAkB,CAAC,IAAI,YAAG,GAAG;gBAEvC,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;aACvB,CAAC,CAAC;SACN,CAAC,CAAC;IACP,EAAC;IAED;;;;;0BAKA,4CAAgB,IAAY;QAExB,OAAO,IAAI,CAAC;IAChB,EAAC;IAED;;;;;;0BAMA,oCAAY,IAAY,EAAE,QAAmC;QAEzD,IAAI,CAAC,UAAU,CAAC,IAAI,YAAG,GAAG,EAAE,IAAI;YAE5B,QAAQ,CAAC,IAAI,IAAI,cAAc,CAAC,CAAC;SACpC,CAAC,CAAC;IACP,EAAC;IAED;;;;;0BAKA,0BAAO,IAAY,EAAE,QAAmC;QAEpD,UAAU,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,YAAG,GAAG,EAAE,IAAI;YAErE,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;SACpB,CAAC,CAAC;IACP,EAAC;IAED;;;;;0BAKA,4BAAQ,IAAY,EAAE,QAA+C;QAEjE,UAAU,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,YAAG,GAAG,EAAE,YAAY;YAEnE,IAAI,CAAC,YAAY,EACjB;gBACI,QAAQ,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;gBACpB,OAAO;aACV;YACD,IAAI,UAAU,GAAG,EAAE,CAAC;YACpB,YAAY,CAAC,OAAO,WAAC;gBAEjB,IAAI,IAAI,GAAG,IAAI,IAAI,EAAE,GAAG,IAAI,IAAI,IAAI,GAAG,GAAG,CAAC,CAAC;gBAC5C,IAAI,OAAO,CAAC,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,IAAI,IAAI,IAAI,OAAO,IAAI,IAAI,EAC7D;oBACI,IAAI,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;oBACzC,IAAI,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,CAAC;oBACxC,UAAU,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;iBAC3B;aACJ,CAAC,CAAC;YACH,IAAI,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YACpC,QAAQ,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;SACzB,CAAC,CAAC;IACP,EAAC;IAED;;;;;0BAKA,wBAAM,IAAY,EAAE,QAA+B;;;QAE/C,IAAI,CAAC,MAAM,CAAC,IAAI,YAAG,MAAM;YAErB,IAAI,MAAM,EACV;gBACI,QAAQ,CAAC,IAAI,KAAK,UAAO,IAAI,cAAU,CAAC,CAAC;gBACzC,OAAO;aACV;YACD,UAAU,CAAC,cAAc,CAACJ,MAAI,CAAC,MAAM,EAAEA,MAAI,CAAC,WAAW,EAAE,IAAI,EAAE,cAAc,EAAE,QAAQ,CAAC,CAAC;SAC5F,CAAC,CAAC;IACP,EAAC;IAED;;;;;0BAKA,kCAAW,IAAY,EAAE,QAA8B;;QAGnD,UAAU,CAAC,iBAAiB,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC;QAC5EK,mBAAa,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;IAC1C,EAAC;IAED;;;;;;0BAMA,8CAAiB,IAAY,EAAE,IAAiB,EAAE,QAA+B;QAE7E,UAAU,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC;QAC/EA,mBAAa,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;IACzC,EAAC;IAED;;;;;;0BAMA,oCAAY,IAAY,EAAE,IAAY,EAAE,QAA+B;QAEnE,UAAU,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC;QAC/EA,mBAAa,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;IACzC,EAAC;IAED;;;;;;0BAMA,oCAAY,IAAY,EAAE,MAAc,EAAE,QAA+B;QAErE,UAAU,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,CAAC,CAAC;QACjFA,mBAAa,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;IACzC,EAAC;IAED;;;;;;0BAMA,kCAAW,IAAY,EAAE,KAAuB,EAAE,QAA+B;;;QAE7ED,sBAAa,CAAC,kBAAkB,CAAC,KAAK,YAAG,WAAW;YAEhDJ,MAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,WAAW,EAAE,QAAQ,CAAC,CAAC;YACnDK,mBAAa,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;SACxC,CAAC,CAAC;IACP,EAAC;IAED;;;;;;0BAMA,8BAAS,GAAW,EAAE,IAAY,EAAE,QAA+B;;;QAE/D,UAAU,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,EAAE,GAAG,YAAG,GAAG,EAAE,IAAI;YAEpE,IAAI,GAAG,EACP;gBACI,QAAQ,CAAC,GAAG,CAAC,CAAC;gBACd,OAAO;aACV;YACD,UAAU,CAAC,cAAc,CAACL,MAAI,CAAC,MAAM,EAAEA,MAAI,CAAC,WAAW,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC;SAClF,CAAC,CAAC;IACP,EAAC;IAED;;;;;0BAKA,kCAAW,WAAmB,EAAE,QAAgC;QAE5D,UAAU,CAAC,mBAAmB,CAAC,IAAI,CAAC,MAAM,YAAG,GAAG,EAAE,gBAAgB;YAE9D,IAAI,GAAG,EAAE;gBAAE,QAAQ,CAAC,KAAK,CAAC,CAAC;gBAAC,OAAO;aAAE;YACrC,QAAQ,CAAC,gBAAgB,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;SACzD,CAAC,CAAC;IACP,EAAC;IACD;;;;;0BAKA,oCAAY,WAAmB,EAAE,QAA8B;QAE3D,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;QAC/B,UAAU,CAAC,iBAAiB,CAAC,IAAI,CAAC,MAAM,EAAE,WAAW,EAAE,QAAQ,CAAC,CAAC;IACrE;;yEACH;IAED;;;AAGA,QAAa,WAAW,GAAG,IAAI,WAAW,EAAE;;IC1V5C;;;AAGA,QAAa,SAAS;;wBAMlB,sCAAa,IAAY;QAErB,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,IAAI,GAAG;cAC5B,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,GAAC;QAC3C,OAAO,IAAI,CAAC;IAChB,EAAC;IACD;;;;;wBAKA,gCAAU,IAAY;QAElB,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;cACjG,OAAO,IAAI,GAAC;QAChB,OAAO,KAAK,CAAC;IACjB,EAAC;IAED;;;;wBAIA,4BAAQ,IAAY;QAEhB,OAAO,CAAC,MAAM,CAAC,IAAI,IAAI,SAAS,CAAC,CAAC;QAClC,IAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QAC/B,IAAI,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC;cACtB,OAAO,IAAI,GAAC;QAChB,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,CAAC;QAC/B,OAAO,IAAI,CAAC;IAChB,EAAC;IAED;;;;wBAIA,8BAAS,IAAY;QAEjB,OAAO,CAAC,MAAM,CAAC,IAAI,IAAI,SAAS,CAAC,CAAC;QAClC,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAC5B,IAAI,IAAI,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;QACvB,IAAI,IAAI,IAAI,EAAE;cACV,IAAI,GAAG,KAAK,CAAC,GAAG,EAAE,GAAC;QACvB,OAAO,IAAI,CAAC;IAChB,EAAC;IAED;;;;wBAIA,4BAAQ,IAAY;QAEhB,OAAO,CAAC,MAAM,CAAC,IAAI,IAAI,SAAS,CAAC,CAAC;QAClC,IAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QAC/B,IAAI,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QAC9B,IAAI,KAAK,IAAI,CAAC,CAAC;cAAE,OAAO,EAAE,GAAC;QAC3B,OAAO,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IAC9B,EAAC;IAED;;;;wBAIA,4BAAQ,IAAY;QAEhB,OAAO,CAAC,MAAM,CAAC,IAAI,IAAI,SAAS,CAAC,CAAC;QAClC,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAC5B,IAAI,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC;cACtB,KAAK,CAAC,GAAG,EAAE,GAAC;QAChB,KAAK,CAAC,GAAG,EAAE,CAAC;QACZ,OAAO,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IAC3B,EAAC;IAED;;;;;;wBAMA,8CAAiB,UAAkB,EAAE,SAAiB;QAElD,OAAO,CAAC,MAAM,CAAC,UAAU,IAAI,SAAS,CAAC,CAAC;QACxC,OAAO,CAAC,MAAM,CAAC,SAAS,IAAI,SAAS,CAAC,CAAC;QAEvC,IAAI,UAAU,CAAC,MAAM,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC,IAAI,GAAG;cAAE,UAAU,IAAI,GAAG,GAAC;QACvE,OAAO,UAAU,GAAG,SAAS,CAAC;IAClC,EAAC;IAED;;;;;;wBAMA,kDAAmB,UAAkB,EAAE,eAAuB;QAE1D,IAAI,UAAU,CAAC,MAAM,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC,IAAI,GAAG;cAAE,UAAU,IAAI,GAAG,GAAC;QACvE,IAAI,eAAe,CAAC,MAAM,CAAC,eAAe,CAAC,MAAM,GAAG,CAAC,CAAC,IAAI,GAAG;cAAE,eAAe,IAAI,GAAG,GAAC;QAEtF,OAAO,UAAU,GAAG,eAAe,CAAC;IACxC,EAAC;IAED;;;;wBAIA,oCAAY,IAAY;QAEpB,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,IAAI,EAAE,CAAC;IACvC,EAAC;IAED;;;;wBAIA,oCAAY,IAAY;QAEpB,IAAI,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC;QACpC,IAAI,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC;cACtB,MAAM,EAAE,GAAC;QACb,OAAO,MAAM,GAAG,CAAC,CAAC;IACtB,EACH;IAED;;;AAGA,QAAa,SAAS,GAAG,IAAI,SAAS,EAAE;;ICpIxC;;;AAGA,QAAa,MAAM,GAiBf,gBAAY,EAAY;QAyEd,YAAO,GAAyC,EAAE,CAAC;QAErD,WAAM,GAAkC,EAAE,CAAC;QAzE/C,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;IACjB;;2FAAC;IAlBD;;;AAGAM,yBAAI,uBAAO,OAAO,IAAI,CAAC,GAAG,IAAI,MAAM,CAAC,GAAE;AACvCA,yBAAI,mBAAG,CAAC,IAAI,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC,GAAE;IAG3B;;;AAGAA,yBAAI;QAEA,OAAO,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC;IACxB,EAAC;IAOD;;;;;qBAKA,4CAAgB,IAAY,EAAE,QAAwD;QAElF,IAAI,CAAC,EAAE,CAAC,eAAe,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;IAC5C,EAAC;IAED;;;;;qBAKA,kCAAW,IAAY,EAAE,QAA2C;QAEhE,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;IACvC,EAAC;IAED;;;;;qBAKA,kCAAW,IAAY,EAAE,QAA8C;QAEnE,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;IACvC,EAAC;IAED;;;;;qBAKA,gCAAU,IAAY,EAAE,QAAqD;QAEzE,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;;IAGtC,EAAC;IAED;;;;qBAIA,4CAAgB,IAAY;QAExB,OAAO,IAAI,CAAC,EAAE,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;IACzC,EAAC;IAED;;;;;;qBAMA,oCAAY,KAAe,EAAE,QAA4C;;;QAErEC,SAAI,CAAC,eAAe,CAAC,KAAK,YAAG,IAAI,EAAE,QAAQ;YAEvCP,MAAI,CAAC,UAAU,CAAC,IAAI,YAAG,GAAG,EAAE,GAAG;gBAE3B,QAAQ,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC;aACxB,CAAC,CAAC;SACN,EAAE,QAAQ,CAAC,CAAC;IACjB;;sEAKH;IAED;;;AAGA,QAAa,EAAE,GAAG,IAAI,MAAM,EAAE;;ICrG9B;;;;;AAKA,QAAa,WAAY;QAgBrB,qBAAY,EAAiB;YAEzBQ,WAAK,OAAC,EAAE,CAAC,CAAC;;;;;;;gEACb;QAZD,mBAAI;YAEA,OAAY,IAAI,CAAC,GAAG,CAAC;UACxB;QACD,mBAAI,mBAAG,KAAmB;YAEtB,IAAI,CAAC,GAAG,GAAG,KAAK,CAAC;UACpB;;;;;;8BAYD,0BAAO,IAAY,EAAE,QAAmC;YAEpD,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;UAClC;;;;;;8BAOD,4BAAQ,IAAY,EAAE,QAA+C;YAEjE,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;UACnC;;;;;;8BAOD,wBAAM,IAAY,EAAE,QAA+B;;;YAE/C,IAAI,GAAG,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;YAEpC,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,YAAG,MAAM;gBAExB,IAAI,MAAM,EACV;oBACI,QAAQ,IAAI,QAAQ,CAAC,IAAI,CAAC,CAAC;oBAC3B,OAAO;iBACV;gBACDR,MAAI,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;aACjC,CAAC,CAAC;UACN;;;;;;8BAOD,kCAAW,IAAY,EAAE,QAA+B;YAEpD,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;UACtC;;;;;;;;;8BAUD,gCAAU,IAAY,EAAE,WAAwB,EAAE,QAA+B;;;YAE7E,IAAI,GAAG,GAAG,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YAClC,GAAG,GAAG,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;YAC3B,IAAI,WAAW,GAAG,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,aAAa,EAAE,KAAK,EAAE,aAAa,EAAE,KAAK,EAAE,aAAa,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC;YAC/K,IAAI,IAAI,GAAG,WAAW,CAAC,GAAG,CAAC,CAAC;YAC5B,IAAI,IAAI,IAAI,eAAe,IAAI,IAAI,IAAI,uBAAuB;kBAC1D,IAAI,GAAG,KAAK,GAAC;YAEjB,IAAI,IAAI,IAAI,KAAK,EACjB;gBACII,sBAAa,CAAC,mBAAmB,CAAC,WAAW,YAAG,GAAG;oBAE/CJ,MAAI,CAAC,EAAE,CAAC,WAAW,CAAC,IAAI,EAAE,GAAG,YAAG,GAAG;wBAE/B,QAAQ,CAAC,GAAG,CAAC,CAAC;qBACjB,CAAC,CAAC;iBACN,CAAC,CAAC;aACN;iBAAM,IAAI,IAAI,IAAI,QAAQ,EAC3B;gBACII,sBAAa,CAAC,mBAAmB,CAAC,WAAW,YAAG,GAAG;oBAE/CJ,MAAI,CAAC,EAAE,CAAC,WAAW,CAAC,IAAI,EAAE,GAAG,YAAG,GAAG;wBAE/B,QAAQ,CAAC,GAAG,CAAC,CAAC;qBACjB,CAAC,CAAC;iBACN,CAAC,CAAC;aACN;iBAAM,IAAI,IAAI,IAAI,aAAa,EAChC;gBACI,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,WAAW,YAAG,GAAG;oBAEzC,QAAQ,CAAC,GAAG,CAAC,CAAC;iBACjB,CAAC,CAAC;aACN;iBACD;gBACI,OAAO,CAAC,KAAK,cAAW,MAAO,CAAA;aAClC;UACJ;;;;;;;8BAQD,8CAAiB,IAAY,EAAE,WAAwB,EAAE,QAA+B;;;;YAGpF,IAAI,OAAO,GAAG,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YACtC,IAAI,CAAC,KAAK,CAAC,OAAO,YAAG,GAAG;gBAEpB,IAAI,GAAG,EACP;oBACI,QAAQ,IAAI,QAAQ,CAAC,GAAG,CAAC,CAAC;oBAC1B,OAAO;iBACV;gBACDA,MAAI,CAAC,EAAE,CAAC,gBAAgB,CAAC,IAAI,EAAE,WAAW,EAAE,QAAQ,CAAC,CAAC;aACzD,CAAC,CAAC;UACN;;;;;;;8BAQD,oCAAY,IAAY,EAAE,GAAW,EAAE,QAA+B;;;;YAGlE,IAAI,OAAO,GAAG,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YACtC,IAAI,CAAC,KAAK,CAAC,OAAO,YAAG,GAAG;gBAEpB,IAAI,GAAG,EACP;oBACI,QAAQ,IAAI,QAAQ,CAAC,GAAG,CAAC,CAAC;oBAC1B,OAAO;iBACV;gBACDA,MAAI,CAAC,EAAE,CAAC,WAAW,CAAC,IAAI,EAAE,GAAG,EAAE,QAAQ,CAAC,CAAC;aAC5C,CAAC,CAAC;UACN;;;;;;;8BAQD,oCAAY,IAAY,EAAE,MAAc,EAAE,QAA+B;;;;YAGrE,IAAI,OAAO,GAAG,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YACtC,IAAI,CAAC,KAAK,CAAC,OAAO,YAAG,GAAG;gBAEpB,IAAI,GAAG,EACP;oBACI,QAAQ,IAAI,QAAQ,CAAC,GAAG,CAAC,CAAC;oBAC1B,OAAO;iBACV;gBACDA,MAAI,CAAC,EAAE,CAAC,WAAW,CAAC,IAAI,EAAE,MAAM,EAAE,QAAQ,CAAC,CAAC;aAC/C,CAAC,CAAC;UACN;;;;;;;8BAQD,kCAAW,IAAY,EAAE,KAAuB,EAAE,QAA+B;;;;YAG7E,IAAI,OAAO,GAAG,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YACtC,IAAI,CAAC,KAAK,CAAC,OAAO,YAAG,GAAG;gBAEpB,IAAI,GAAG,EACP;oBACI,QAAQ,IAAI,QAAQ,CAAC,GAAG,CAAC,CAAC;oBAC1B,OAAO;iBACV;gBACDA,MAAI,CAAC,EAAE,CAAC,UAAU,CAAC,IAAI,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAC;aAC7C,CAAC,CAAC;UACN;;;;;;;8BAQD,8BAAS,GAAW,EAAE,IAAY,EAAE,QAA+B;YAE/D,IAAI,CAAC,EAAE,CAAC,QAAQ,CAAC,GAAG,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC;UACzC;;;;;;;8BAQD,oCAAY,IAAY,EAAE,QAAmC;YAEzD,IAAI,CAAC,EAAE,CAAC,WAAW,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;UACvC;;;;;;8BAOD,oCAAY,WAAmB,EAAE,QAA8B;YAE3D,IAAI,CAAC,EAAE,CAAC,WAAW,CAAC,WAAW,EAAE,QAAQ,CAAC,CAAC;UAC9C;;;;;;8BAOD,kCAAW,WAAmB,EAAE,QAAgC;YAE5D,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,WAAW,EAAE,QAAQ,CAAC,CAAC;UAC7C;;;;8BAKD,oDAAoB,OAAY,EAAE,QAAmD;;6CAA1D,GAAG;;YAE1B,IAAI,IAAI,GAAG,CAAC,OAAO,CAAC,CAAC;YACrB,IAAI,MAAM,GAAG,EAAE,CAAC;YAChB,IAAI,UAAU,GAAG,EAAE,CAAC;;YAGpB,IAAI,MAAM;gBAEN,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,EACnB;oBACI,UAAU,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC;oBAC1BA,MAAI,CAAC,OAAO,CAAC,UAAU,YAAG,GAAG,EAAE,KAAK;;wBAGhC,IAAI,YAAY;4BAEZ,IAAI,KAAK,CAAC,MAAM,IAAI,CAAC,EACrB;gCACI,MAAM,EAAE,CAAC;gCACT,OAAO;6BACV;4BACD,IAAI,SAAS,GAAG,UAAU,IAAI,UAAU,IAAI,EAAE,GAAG,EAAE,GAAG,GAAG,CAAC,GAAG,KAAK,CAAC,KAAK,EAAE,CAAC;4BAC3E,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;4BACvBA,MAAI,CAAC,WAAW,CAAC,SAAS,YAAE;gCAExB,IAAI,MAAM;sCAAE,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,GAAC;gCACjC,YAAY,EAAE,CAAC;6BAClB,CAAC,CAAC;yBACN,CAAC;wBACF,YAAY,EAAE,CAAC;qBAClB,CAAC,CAAC;iBACN;qBACD;oBACI,QAAQ,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;iBAC1B;aACJ,CAAA;YACD,MAAM,EAAE,CAAC;UACZ;;;;;;;8BAQD,8BAAS,GAAW,EAAE,IAAY,EAAE,QAA+B;;;YAE/D,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,IAAI,YAAG,GAAG;gBAEzB,IAAI,GAAG,EACP;oBACI,QAAQ,IAAI,QAAQ,CAAC,GAAG,CAAC,CAAC;oBAC1B,OAAO;iBACV;gBACDA,MAAI,CAAC,UAAU,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;aAClC,CAAC,CAAC;UACN;;;;;;;8BAQD,kCAAW,OAAe,EAAE,OAAe,EAAE,QAA+B;YAExE,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,OAAO,EAAE,QAAQ,CAAC,CAAC;UAC7C;;;;;;8BAOD,gCAAU,SAA6B,EAAE,QAA+B;;;YAEpE,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,MAAM,EAAE,YAAG,GAAG;gBAEnC,IAAI,GAAG,EACP;oBACI,QAAQ,IAAI,QAAQ,CAAC,GAAG,CAAC,CAAC;oBAC1B,OAAO;iBACV;gBACD,IAAI,WAAW,GAAG,SAAS,CAAC,MAAM,WAAE,KAAe,EAAE,OAAO,IAAO,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,KAAK,CAAC,EAAE,EAAE,EAAE,CAAC,CAAA;gBAC/GA,MAAI,CAAC,WAAW,CAAC,WAAW,EAAE,QAAQ,CAAC,CAAC;aAC3C,CAAC,CAAC;UACN;;;;;;8BAOD,gCAAU,SAA6B,EAAE,QAA+B;;;YAEpE,IAAI,SAAS,CAAC,MAAM,GAAG,CAAC,EACxB;gBACI,IAAI,QAAQ,GAA0B,SAAS,CAAC,KAAK,EAAE,CAAC;gBACxD,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC,YAAG,GAAG;oBAExC,IAAI,GAAG,EACP;wBACI,QAAQ,IAAI,QAAQ,CAAC,GAAG,CAAC,CAAC;wBAC1B,OAAO;qBACV;oBACDA,MAAI,CAAC,SAAS,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;iBACvC,CAAC,CAAC;gBACH,OAAO;aACV;YACD,QAAQ,IAAI,QAAQ,CAAC,IAAI,CAAC,CAAC;UAC9B;;;;;;8BAOD,oCAAY,WAAqB,EAAE,QAA+B;;;YAE9D,IAAI,WAAW,CAAC,MAAM,GAAG,CAAC,EAC1B;gBACI,IAAI,CAAC,UAAU,CAAS,WAAW,CAAC,KAAK,EAAE,YAAG,GAAG;oBAE7C,IAAI,GAAG,EACP;wBACI,QAAQ,IAAI,QAAQ,CAAC,GAAG,CAAC,CAAC;wBAC1B,OAAO;qBACV;oBACDA,MAAI,CAAC,WAAW,CAAC,WAAW,EAAE,QAAQ,CAAC,CAAC;iBAC3C,CAAC,CAAC;gBACH,OAAO;aACV;YACD,QAAQ,IAAI,QAAQ,CAAC,IAAI,CAAC,CAAC;UAC9B;;;;;;;8BAQD,0BAAO,OAAe,EAAE,OAAe,EAAE,QAA+B;;;YAEpE,IAAI,CAAC,WAAW,CAAC,OAAO,YAAE;gBAEtB,IAAI,MAAM,EACV;oBACIA,MAAI,CAAC,mBAAmB,CAAC,OAAO,YAAG,GAAG,EAAE,SAAS;wBAE7C,IAAI,GAAG,EACP;4BACI,QAAQ,IAAI,QAAQ,CAAC,GAAG,CAAC,CAAC;4BAC1B,OAAO;yBACV;wBACD,IAAI,WAAW,GAAuB,CAAC,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC,CAAC;wBAC3D,SAAS,CAAC,OAAO,WAAC;4BAEd,WAAW,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC;yBAClE,CAAC,CAAC;wBACHA,MAAI,CAAC,SAAS,CAAC,WAAW,EAAE,QAAQ,CAAC,CAAC;qBACzC,CAAC,CAAC;iBACN;qBACD;oBACIA,MAAI,CAAC,UAAU,CAAC,OAAO,EAAE,OAAO,EAAE,QAAQ,CAAC,CAAC;iBAC/C;aACJ,CAAC,CAAC;UACN;;;;;;;;8BASD,sBAAK,GAAW,EAAE,IAAY,EAAE,QAAgC;YAE5D,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC;UACpC;;;;;;8BAOD,4BAAO,IAAY,EAAE,QAA+B;;;YAEhD,IAAI,CAAC,WAAW,CAAC,IAAI,YAAE;gBAEnB,IAAI,MAAM,EACV;oBACIA,MAAI,CAAC,mBAAmB,CAAC,IAAI,YAAG,GAAG,EAAE,SAAS;wBAE1C,IAAI,GAAG,EACP;4BACI,QAAQ,IAAI,QAAQ,CAAC,GAAG,CAAC,CAAC;4BAC1B,OAAO;yBACV;wBACD,IAAI,WAAW,GAAa,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;wBACnDA,MAAI,CAAC,WAAW,CAAC,WAAW,EAAE,QAAQ,CAAC,CAAC;qBAC3C,CAAC,CAAC;iBACN;qBACD;oBACIA,MAAI,CAAC,UAAU,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;iBACnC;aACJ,CAAC,CAAC;;;;;;MArcsB;;;;;;;;;;;;;;;;;;;;;;;"}