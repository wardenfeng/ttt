{"version":3,"file":"index.mjs","sources":["../../src/base/LoaderDataFormat.ts","../../src/base/Loader.ts","../../src/base/_IndexedDB.ts","../../src/FSType.ts","../../src/HttpFS.ts","../../src/IndexedDBFS.ts","../../src/PathUtils.ts","../../src/ReadFS.ts","../../src/ReadWriteFS.ts"],"sourcesContent":["\r\n/**\r\n * 加载数据类型\r\n */\r\nexport enum LoaderDataFormat\r\n{\r\n    /**\r\n     * 以原始二进制数据形式接收下载的数据。\r\n     */\r\n    BINARY = \"binary\",\r\n    /**\r\n     * 以文本形式接收已下载的数据。\r\n     */\r\n    TEXT = \"text\",\r\n    /**\r\n     * 图片数据\r\n     */\r\n    IMAGE = \"image\",\r\n}\r\n","import { LoaderDataFormat } from \"./LoaderDataFormat\";\r\n\r\n/**\r\n * 加载类\r\n */\r\nexport class Loader\r\n{\r\n\r\n    /**\r\n     * 加载文本\r\n     * @param url   路径\r\n     */\r\n    loadText(url: string, onCompleted?: (content: string) => void, onRequestProgress?: () => void, onError?: (e: Error) => void)\r\n    {\r\n        xmlHttpRequestLoad({ url: url, dataFormat: LoaderDataFormat.TEXT, onCompleted: <any>onCompleted, onProgress: onRequestProgress, onError: onError });\r\n    }\r\n\r\n    /**\r\n     * 加载二进制\r\n     * @param url   路径\r\n     */\r\n    loadBinary(url: string, onCompleted?: (content: ArrayBuffer) => void, onRequestProgress?: () => void, onError?: (e: Error) => void)\r\n    {\r\n        xmlHttpRequestLoad({ url: url, dataFormat: LoaderDataFormat.BINARY, onCompleted: <any>onCompleted, onProgress: onRequestProgress, onError: onError });\r\n    }\r\n\r\n    /**\r\n     * 加载图片\r\n     * @param url   路径\r\n     */\r\n    loadImage(url: string, onCompleted?: (content: HTMLImageElement) => void, onRequestProgress?: () => void, onError?: (e: Error) => void)\r\n    {\r\n        var image = new Image();\r\n        image.crossOrigin = \"Anonymous\";\r\n        image.onload = (event) =>\r\n        {\r\n            onCompleted && onCompleted(image);\r\n        }\r\n        image.onerror = (event) =>\r\n        {\r\n            console.error(\"Error while trying to load texture: \" + url);\r\n            //\r\n            image.src = \"data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z\";\r\n            //\r\n            var err = new Error(url + \" 加载失败！\");\r\n            onError && onError(err);\r\n        }\r\n        image.src = url;\r\n    }\r\n}\r\n\r\n/**\r\n * 加载类\r\n */\r\nexport const loader = new Loader();\r\n\r\ninterface LoadItem\r\n{\r\n    url: string;\r\n    dataFormat: LoaderDataFormat;\r\n    onCompleted?: (content: string | ArrayBuffer) => void;\r\n    onProgress?: (loaded: number, total: number) => void;\r\n    onError?: (ev: Error) => void;\r\n}\r\n\r\n/**\r\n * 使用XMLHttpRequest加载\r\n * @param url           加载路径\r\n * @param dataFormat    数据类型\r\n */\r\nfunction xmlHttpRequestLoad(loadItem: LoadItem)\r\n{\r\n    var request = new XMLHttpRequest();\r\n    request.open('Get', loadItem.url, true);\r\n    request.setRequestHeader(\"Access-Control-Allow-Origin\", \"*\");\r\n    request.responseType = loadItem.dataFormat == LoaderDataFormat.BINARY ? \"arraybuffer\" : \"\";\r\n    request.onreadystatechange = onRequestReadystatechange(request, loadItem);\r\n    request.onprogress = onRequestProgress(request, loadItem);\r\n    request.send();\r\n}\r\n\r\n/**\r\n * 请求进度回调\r\n */\r\nfunction onRequestProgress(request: XMLHttpRequest, loadItem: LoadItem)\r\n{\r\n    return (event: ProgressEvent) =>\r\n    {\r\n        loadItem.onProgress && loadItem.onProgress(event.loaded, event.total);\r\n    }\r\n}\r\n\r\n/**\r\n * 请求状态变化回调\r\n */\r\nfunction onRequestReadystatechange(request: XMLHttpRequest, loadItem: LoadItem)\r\n{\r\n    return (ev) =>\r\n    {\r\n        if (request.readyState == 4)\r\n        {// 4 = \"loaded\"\r\n\r\n            request.onreadystatechange = <any>null;\r\n\r\n            if (request.status >= 200 && request.status < 300)\r\n            {\r\n                var content = loadItem.dataFormat == LoaderDataFormat.TEXT ? request.responseText : request.response;\r\n                loadItem.onCompleted && loadItem.onCompleted(content);\r\n            } else\r\n            {\r\n                var err = new Error(loadItem.url + \" 加载失败！\");\r\n                loadItem.onError && loadItem.onError(err);\r\n                loadItem.onCompleted && loadItem.onCompleted(null);\r\n            }\r\n        }\r\n    }\r\n}\r\n","\r\nvar databases: { [name: string]: IDBDatabase } = {};\r\n\r\n/**\r\n * \r\n */\r\nexport class _IndexedDB\r\n{\r\n    /**\r\n     * 数据库状态\r\n     */\r\n    private _dbStatus: {\r\n        [dbname: string]: {\r\n            /**\r\n             * 状态\r\n             */\r\n            status: DBStatus,\r\n            /**\r\n             * 开启或者升级成功回调\r\n             */\r\n            onsuccessCallbacks: ((err: Error, database: IDBDatabase) => void)[],\r\n            /**\r\n             * 升级回调\r\n             */\r\n            onupgradeneededCallbacks: ((newdatabase: IDBDatabase) => void)[],\r\n        }\r\n    } = {};\r\n\r\n    /**\r\n     * 是否支持 indexedDB \r\n     */\r\n    support()\r\n    {\r\n        if (typeof indexedDB == \"undefined\")\r\n        {\r\n            indexedDB = window.indexedDB || window[\"mozIndexedDB\"] || window[\"webkitIndexedDB\"] || window[\"msIndexedDB\"];\r\n\r\n            if (indexedDB == undefined)\r\n            {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * 获取数据库，如果不存在则新建数据库\r\n     * \r\n     * @param dbname 数据库名称\r\n     * @param callback 完成回调\r\n     */\r\n    getDatabase(dbname: string, callback: (err: any, database: IDBDatabase) => void)\r\n    {\r\n        if (databases[dbname])\r\n        {\r\n            callback(null, databases[dbname]);\r\n            return;\r\n        }\r\n\r\n        this._open(dbname, callback);\r\n    }\r\n\r\n    /**\r\n     * 打开或者升级数据库\r\n     * \r\n     * @param dbname 数据库名称\r\n     * @param callback 完成回调\r\n     * @param upgrade 是否升级数据库\r\n     * @param onupgrade 升级回调\r\n     */\r\n    private _open(dbname: string, callback: (err: any, database: IDBDatabase) => void, upgrade = false, onupgrade?: (newdatabase: IDBDatabase) => void)\r\n    {\r\n        if (!this._dbStatus[dbname]) this._dbStatus[dbname] = { status: DBStatus.unOpen, onsuccessCallbacks: [], onupgradeneededCallbacks: [] };\r\n\r\n        this._dbStatus[dbname].onsuccessCallbacks.push(callback);\r\n        if (upgrade)\r\n        {\r\n            console.assert(!!onupgrade);\r\n            this._dbStatus[dbname].onupgradeneededCallbacks.push(onupgrade);\r\n        }\r\n        if (this._dbStatus[dbname].status == DBStatus.opening || this._dbStatus[dbname].status == DBStatus.upgrading) return;\r\n\r\n        var request: IDBOpenDBRequest;\r\n        if (!upgrade)\r\n        {\r\n            request = indexedDB.open(dbname);\r\n            this._dbStatus[dbname].status = DBStatus.opening;\r\n        } else\r\n        {\r\n            var oldDatabase = databases[dbname];\r\n            oldDatabase.close();\r\n            delete databases[dbname];\r\n\r\n            request = indexedDB.open(dbname, oldDatabase.version + 1);\r\n            this._dbStatus[dbname].status = DBStatus.upgrading;\r\n        }\r\n\r\n        request.onupgradeneeded = (event) =>\r\n        {\r\n            var newdatabase: IDBDatabase = event.target[\"result\"];\r\n            request.onupgradeneeded = null;\r\n\r\n            var callbacks = this._dbStatus[dbname].onupgradeneededCallbacks.concat();\r\n            this._dbStatus[dbname].onupgradeneededCallbacks.length = 0;\r\n            callbacks.forEach(element =>\r\n            {\r\n                element(newdatabase);\r\n            });\r\n        }\r\n        request.onsuccess = (event) =>\r\n        {\r\n            databases[dbname] = event.target[\"result\"];\r\n            request.onsuccess = null;\r\n\r\n            this._dbStatus[dbname].status = DBStatus.opened;\r\n\r\n            var callbacks = this._dbStatus[dbname].onsuccessCallbacks.concat();\r\n            this._dbStatus[dbname].onsuccessCallbacks.length = 0;\r\n            callbacks.forEach(element =>\r\n            {\r\n                element(null, databases[dbname]);\r\n            });\r\n        };\r\n        request.onerror = (event) =>\r\n        {\r\n            request.onerror = null;\r\n\r\n            this._dbStatus[dbname].status = DBStatus.error;\r\n\r\n            var callbacks = this._dbStatus[dbname].onsuccessCallbacks.concat();\r\n            this._dbStatus[dbname].onsuccessCallbacks.length = 0;\r\n            callbacks.forEach(element =>\r\n            {\r\n                element(<any>event, <any>null);\r\n            });\r\n        };\r\n    }\r\n\r\n    /**\r\n     * 删除数据库\r\n     * \r\n     * @param dbname 数据库名称\r\n     * @param callback 完成回调\r\n     */\r\n    deleteDatabase(dbname: string, callback?: (err: any) => void)\r\n    {\r\n        var request = indexedDB.deleteDatabase(dbname);\r\n        request.onsuccess = function (event)\r\n        {\r\n            delete databases[dbname];\r\n            callback && callback(null);\r\n            request.onsuccess = null;\r\n        };\r\n        request.onerror = function (event)\r\n        {\r\n            callback && callback(event);\r\n            request.onerror = null;\r\n        };\r\n    }\r\n\r\n    /**\r\n     * 是否存在指定的对象存储\r\n     * \r\n     * @param dbname 数据库名称\r\n     * @param objectStroreName 对象存储名称\r\n     * @param callback 完成回调\r\n     */\r\n    hasObjectStore(dbname: string, objectStroreName: string, callback: (has: boolean) => void)\r\n    {\r\n        this.getDatabase(dbname, (err, database) =>\r\n        {\r\n            callback(database.objectStoreNames.contains(objectStroreName));\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 获取对象存储名称列表\r\n     * \r\n     * @param dbname 数据库\r\n     * @param callback 完成回调\r\n     */\r\n    getObjectStoreNames(dbname: string, callback: (err: Error | null, objectStoreNames: string[]) => void)\r\n    {\r\n        this.getDatabase(dbname, (err, database) =>\r\n        {\r\n            var objectStoreNames: string[] = [];\r\n            for (let i = 0; i < database.objectStoreNames.length; i++)\r\n            {\r\n                objectStoreNames.push(<string>database.objectStoreNames.item(i));\r\n            }\r\n            callback(null, objectStoreNames)\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 创建对象存储\r\n     * \r\n     * @param dbname 数据库名称\r\n     * @param objectStroreName 对象存储名称\r\n     * @param callback 完成回调\r\n     */\r\n    createObjectStore(dbname: string, objectStroreName: string, callback?: (err: any) => void)\r\n    {\r\n        this.getDatabase(dbname, (err, database) =>\r\n        {\r\n            if (database.objectStoreNames.contains(objectStroreName))\r\n            {\r\n                callback && callback(null);\r\n                return;\r\n            }\r\n\r\n            this._open(dbname, callback, true, (newdatabase: IDBDatabase) =>\r\n            {\r\n                newdatabase.createObjectStore(objectStroreName);\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 删除对象存储\r\n     * \r\n     * @param dbname 数据库名称\r\n     * @param objectStroreName 对象存储名称\r\n     * @param callback 完成回调\r\n     */\r\n    deleteObjectStore(dbname: string, objectStroreName: string, callback?: (err: any) => void)\r\n    {\r\n        this.getDatabase(dbname, (err, database) =>\r\n        {\r\n            if (!database.objectStoreNames.contains(objectStroreName))\r\n            {\r\n                callback && callback(null);\r\n                return;\r\n            }\r\n            this._open(dbname, callback, true, (newdatabase: IDBDatabase) =>\r\n            {\r\n                newdatabase.deleteObjectStore(objectStroreName);\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 获取对象存储中所有键列表\r\n     * \r\n     * @param dbname 数据库名称\r\n     * @param objectStroreName 对象存储名称\r\n     * @param callback 完成回调\r\n     */\r\n    getAllKeys(dbname: string, objectStroreName: string, callback?: (err: Error, keys: string[]) => void)\r\n    {\r\n        this.getDatabase(dbname, (err, database) =>\r\n        {\r\n            try\r\n            {\r\n                var transaction = database.transaction([objectStroreName], 'readwrite');\r\n                var objectStore = transaction.objectStore(objectStroreName);\r\n                var request = objectStore.getAllKeys();\r\n                request.onsuccess = function (event)\r\n                {\r\n                    callback && callback(null, event.target[\"result\"]);\r\n                    request.onsuccess = null;\r\n                };\r\n            } catch (error)\r\n            {\r\n                callback && callback(error, null);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 获取对象存储中指定键对应的数据\r\n     * \r\n     * @param dbname 数据库名称\r\n     * @param objectStroreName 对象存储名称\r\n     * @param key 键\r\n     * @param callback 完成回调\r\n     */\r\n    objectStoreGet(dbname: string, objectStroreName: string, key: string | number, callback?: (err: Error, data: any) => void)\r\n    {\r\n        this.getDatabase(dbname, (err, database) =>\r\n        {\r\n            var transaction = database.transaction([objectStroreName], 'readwrite');\r\n            var objectStore = transaction.objectStore(objectStroreName);\r\n            var request = objectStore.get(key);\r\n            request.onsuccess = function (event)\r\n            {\r\n                var result = event.target[\"result\"];\r\n                callback && callback(result != null ? null : new Error(`没有找到资源 ${key}`), result);\r\n                request.onsuccess = null;\r\n            };\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 设置对象存储的键与值，如果不存在指定键则新增否则修改。\r\n     * \r\n     * @param dbname 数据库名称\r\n     * @param objectStroreName 对象存储名称\r\n     * @param key 键\r\n     * @param data 数据\r\n     * @param callback 完成回调\r\n     */\r\n    objectStorePut(dbname: string, objectStroreName: string, key: string | number, data: any, callback?: (err: Error) => void)\r\n    {\r\n        this.getDatabase(dbname, (err, database) =>\r\n        {\r\n            try\r\n            {\r\n                var transaction = database.transaction([objectStroreName], 'readwrite');\r\n                var objectStore = transaction.objectStore(objectStroreName);\r\n                var request = objectStore.put(data, key);\r\n                request.onsuccess = function (event)\r\n                {\r\n                    callback && callback(null);\r\n                    request.onsuccess = null;\r\n                };\r\n            } catch (error)\r\n            {\r\n                callback && callback(error);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 删除对象存储中指定键以及对于数据\r\n     * \r\n     * @param dbname 数据库名称\r\n     * @param objectStroreName 对象存储名称\r\n     * @param key 键\r\n     * @param callback 完成回调\r\n     */\r\n    objectStoreDelete(dbname: string, objectStroreName: string, key: string | number, callback?: (err?: Error) => void)\r\n    {\r\n        this.getDatabase(dbname, (err, database) =>\r\n        {\r\n            try\r\n            {\r\n                var transaction = database.transaction([objectStroreName], 'readwrite');\r\n                var objectStore = transaction.objectStore(objectStroreName);\r\n                var request = objectStore.delete(key);\r\n                request.onsuccess = function (event)\r\n                {\r\n                    callback && callback();\r\n                    request.onsuccess = null;\r\n                };\r\n            } catch (error)\r\n            {\r\n                callback && callback(error);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 清空对象存储中数据\r\n     * \r\n     * @param dbname 数据库名称\r\n     * @param objectStroreName 对象存储名称\r\n     * @param callback 完成回调\r\n     */\r\n    objectStoreClear(dbname: string, objectStroreName: string, callback?: (err?: Error) => void)\r\n    {\r\n        this.getDatabase(dbname, (err, database) =>\r\n        {\r\n            try\r\n            {\r\n                var transaction = database.transaction([objectStroreName], 'readwrite');\r\n                var objectStore = transaction.objectStore(objectStroreName);\r\n                var request = objectStore.clear();\r\n                request.onsuccess = function (event)\r\n                {\r\n                    callback && callback();\r\n                    request.onsuccess = null;\r\n                };\r\n            } catch (error)\r\n            {\r\n                callback && callback(error);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * \r\n */\r\nexport const _indexedDB = new _IndexedDB();\r\n\r\n/**\r\n * 数据库状态\r\n */\r\nenum DBStatus\r\n{\r\n    /**\r\n     * 未开启\r\n     */\r\n    unOpen,\r\n\r\n    /**\r\n     * 正在开启中\r\n     */\r\n    opening,\r\n\r\n    /**\r\n     * 已开启\r\n     */\r\n    opened,\r\n\r\n    /**\r\n     * 正在升级中\r\n     */\r\n    upgrading,\r\n\r\n    /**\r\n     * 开启或者升级失败\r\n     */\r\n    error,\r\n}\r\n","\r\n/**\r\n * 文件系统类型\r\n */\r\nexport enum FSType\r\n{\r\n    http = \"http\",\r\n    native = \"native\",\r\n    indexedDB = \"indexedDB\"\r\n}\r\n","import { loader } from \"./base/Loader\";\r\nimport { FSType } from \"./FSType\";\r\nimport { IReadFS } from \"./IReadFS\";\r\n\r\n/**\r\n * Http可读文件系统\r\n */\r\nexport class HttpFS implements IReadFS\r\n{\r\n    /**\r\n     * 根路径\r\n     */\r\n    rootPath = \"\";\r\n\r\n    type = FSType.http;\r\n\r\n    constructor(rootPath = \"\")\r\n    {\r\n        this.rootPath = rootPath;\r\n        if (this.rootPath == \"\")\r\n        {\r\n            if (typeof document != \"undefined\")\r\n            {\r\n                var url = document.URL.split(\"?\").shift();\r\n                this.rootPath = url.substring(0, url.lastIndexOf(\"/\") + 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 读取文件\r\n     * @param path 路径\r\n     * @param callback 读取完成回调 当err不为null时表示读取失败\r\n     */\r\n    readArrayBuffer(path: string, callback: (err: Error, data: ArrayBuffer) => void)\r\n    {\r\n        // rootPath\r\n        loader.loadBinary(this.getAbsolutePath(path),\r\n            (content) =>\r\n            {\r\n                callback(null, content);\r\n            },\r\n            null,\r\n            (e) =>\r\n            {\r\n                callback(e, null);\r\n            });\r\n    }\r\n\r\n    /**\r\n     * 读取文件为字符串\r\n     * @param path 路径\r\n     * @param callback 读取完成回调 当err不为null时表示读取失败\r\n     */\r\n    readString(path: string, callback: (err: Error, data: string) => void)\r\n    {\r\n        loader.loadText(this.getAbsolutePath(path),\r\n            (content) =>\r\n            {\r\n                callback(null, content);\r\n            },\r\n            null,\r\n            (e) =>\r\n            {\r\n                callback(e, null);\r\n            });\r\n    }\r\n\r\n    /**\r\n     * 读取文件为Object\r\n     * @param path 路径\r\n     * @param callback 读取完成回调 当err不为null时表示读取失败\r\n     */\r\n    readObject(path: string, callback: (err: Error, data: Object) => void)\r\n    {\r\n        loader.loadText(this.getAbsolutePath(path),\r\n            (content) =>\r\n            {\r\n                var obj = JSON.parse(content);\r\n                callback(null, obj);\r\n            },\r\n            null,\r\n            (e) =>\r\n            {\r\n                callback(e, null);\r\n            });\r\n    }\r\n\r\n    /**\r\n     * 加载图片\r\n     * @param path 图片路径\r\n     * @param callback 加载完成回调\r\n     */\r\n    readImage(path: string, callback: (err: Error, img: HTMLImageElement) => void)\r\n    {\r\n        var img = new Image();\r\n        img.onload = () =>\r\n        {\r\n            callback(null, img);\r\n        };\r\n        img.onerror = (evt) =>\r\n        {\r\n            callback(new Error(`加载图片${path}失败`), null);\r\n        }\r\n        img.src = this.getAbsolutePath(path);\r\n    }\r\n\r\n    /**\r\n     * 获取文件绝对路径\r\n     * @param path （相对）路径\r\n     * @param callback 回调函数\r\n     */\r\n    getAbsolutePath(path: string)\r\n    {\r\n        return this.rootPath + path;\r\n    }\r\n}\r\n\r\n/**\r\n * 默认基础文件系统\r\n */\r\n export const basefs: IReadFS = new HttpFS();","import { globalEmitter } from \"@feng3d/event\";\r\nimport { dataTransform } from \"@feng3d/polyfill\";\r\nimport { _indexedDB } from \"./base/_IndexedDB\";\r\nimport { FSType } from \"./FSType\";\r\nimport { IReadWriteFS } from \"./IReadWriteFS\";\r\n\r\n/**\r\n * 用于是否为文件夹\r\n */\r\nconst directorytoken = \"!!!___directory___!!!\";\r\n\r\n/**\r\n * 索引数据文件系统\r\n */\r\nexport class IndexedDBFS implements IReadWriteFS\r\n{\r\n    get type()\r\n    {\r\n        return FSType.indexedDB;\r\n    }\r\n\r\n    /**\r\n     * 数据库名称\r\n     */\r\n    DBname: string;\r\n\r\n    /**\r\n     * 项目名称（表单名称）\r\n     */\r\n    projectname: string;\r\n\r\n    constructor(DBname = \"feng3d-editor\", projectname = \"testproject\")\r\n    {\r\n        this.DBname = DBname;\r\n        this.projectname = projectname;\r\n    }\r\n\r\n    /**\r\n     * 读取文件\r\n     * @param path 路径\r\n     * @param callback 读取完成回调 当err不为null时表示读取失败\r\n     */\r\n    readArrayBuffer(path: string, callback: (err: Error, data: ArrayBuffer) => void)\r\n    {\r\n        _indexedDB.objectStoreGet(this.DBname, this.projectname, path, (err, data) =>\r\n        {\r\n            if (err)\r\n            {\r\n                callback(err, data);\r\n                return;\r\n            }\r\n            if (data instanceof ArrayBuffer)\r\n            {\r\n                callback(null, data);\r\n            } else if (data instanceof Object)\r\n            {\r\n                var str = JSON.stringify(data, null, '\\t').replace(/[\\n\\t]+([\\d\\.e\\-\\[\\]]+)/g, '$1')\r\n                var arraybuffer = dataTransform.stringToArrayBuffer(str);\r\n                callback(null, arraybuffer);\r\n            } else\r\n            {\r\n                var arraybuffer = dataTransform.stringToArrayBuffer(data);\r\n                callback(null, arraybuffer);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 读取文件\r\n     * @param path 路径\r\n     * @param callback 读取完成回调 当err不为null时表示读取失败\r\n     */\r\n    readString(path: string, callback: (err: Error, data: string) => void)\r\n    {\r\n        _indexedDB.objectStoreGet(this.DBname, this.projectname, path, (err, data) =>\r\n        {\r\n            if (err)\r\n            {\r\n                callback(err, data);\r\n                return;\r\n            }\r\n            if (data instanceof ArrayBuffer)\r\n            {\r\n                dataTransform.arrayBufferToString(data, (str) =>\r\n                {\r\n                    callback(null, str);\r\n                });\r\n            } else if (data instanceof Object)\r\n            {\r\n                var str = JSON.stringify(data, null, '\\t').replace(/[\\n\\t]+([\\d\\.e\\-\\[\\]]+)/g, '$1')\r\n                callback(null, str);\r\n            } else\r\n            {\r\n                callback(null, data);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 读取文件\r\n     * @param path 路径\r\n     * @param callback 读取完成回调 当err不为null时表示读取失败\r\n     */\r\n    readObject(path: string, callback: (err: Error, data: object) => void)\r\n    {\r\n        _indexedDB.objectStoreGet(this.DBname, this.projectname, path, (err, data) =>\r\n        {\r\n            if (err)\r\n            {\r\n                callback(err, data);\r\n                return;\r\n            }\r\n            if (data instanceof ArrayBuffer)\r\n            {\r\n                dataTransform.arrayBufferToString(data, (str) =>\r\n                {\r\n                    var obj = JSON.parse(str);\r\n                    callback(null, obj);\r\n                });\r\n            } else if (data instanceof Object)\r\n            {\r\n                callback(null, data);\r\n            } else\r\n            {\r\n                console.assert(typeof data == \"string\");\r\n                var obj = JSON.parse(data);\r\n                callback(null, obj);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 加载图片\r\n     * @param path 图片路径\r\n     * @param callback 加载完成回调\r\n     */\r\n    readImage(path: string, callback: (err: Error, img: HTMLImageElement) => void)\r\n    {\r\n        this.readArrayBuffer(path, (err, data) =>\r\n        {\r\n            if (err)\r\n            {\r\n                callback(err, null);\r\n                return;\r\n            }\r\n            dataTransform.arrayBufferToImage(data, (img) =>\r\n            {\r\n                callback(null, img);\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 获取文件绝对路径\r\n     * @param path （相对）路径\r\n     * @param callback 回调函数\r\n     */\r\n    getAbsolutePath(path: string)\r\n    {\r\n        return path;\r\n    }\r\n\r\n    /**\r\n     * 是否为文件夹\r\n     *\r\n     * @param path 文件路径\r\n     * @param callback 完成回调\r\n     */\r\n    isDirectory(path: string, callback: (result: boolean) => void)\r\n    {\r\n        this.readString(path, (err, data) =>\r\n        {\r\n            callback(data == directorytoken);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 文件是否存在\r\n     * @param path 文件路径\r\n     * @param callback 回调函数\r\n     */\r\n    exists(path: string, callback: (exists: boolean) => void): void\r\n    {\r\n        _indexedDB.objectStoreGet(this.DBname, this.projectname, path, (err, data) =>\r\n        {\r\n            callback(!!data);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 读取文件夹中文件列表\r\n     * @param path 路径\r\n     * @param callback 回调函数\r\n     */\r\n    readdir(path: string, callback: (err: Error, files: string[]) => void): void\r\n    {\r\n        _indexedDB.getAllKeys(this.DBname, this.projectname, (err, allfilepaths) =>\r\n        {\r\n            if (!allfilepaths)\r\n            {\r\n                callback(err, null);\r\n                return;\r\n            }\r\n            var subfilemap = {};\r\n            allfilepaths.forEach(element =>\r\n            {\r\n                var dirp = path == \"\" ? path : (path + \"/\");\r\n                if (element.substr(0, dirp.length) == dirp && element != path)\r\n                {\r\n                    var result = element.substr(dirp.length);\r\n                    var subfile = result.split(\"/\").shift();\r\n                    subfilemap[subfile] = 1;\r\n                }\r\n            });\r\n            var files = Object.keys(subfilemap);\r\n            callback(null, files);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 新建文件夹\r\n     * @param path 文件夹路径\r\n     * @param callback 回调函数\r\n     */\r\n    mkdir(path: string, callback?: (err: Error) => void): void\r\n    {\r\n        this.exists(path, (exists) =>\r\n        {\r\n            if (exists)\r\n            {\r\n                callback(new Error(`文件夹${path}已存在无法新建`));\r\n                return;\r\n            }\r\n            _indexedDB.objectStorePut(this.DBname, this.projectname, path, directorytoken, callback);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 删除文件\r\n     * @param path 文件路径\r\n     * @param callback 回调函数\r\n     */\r\n    deleteFile(path: string, callback: (err: Error) => void)\r\n    {\r\n        // 删除文件\r\n        _indexedDB.objectStoreDelete(this.DBname, this.projectname, path, callback);\r\n        globalEmitter.emit(\"fs.delete\", path);\r\n    }\r\n\r\n    /**\r\n     * 写文件\r\n     * @param path 文件路径\r\n     * @param data 文件数据\r\n     * @param callback 回调函数\r\n     */\r\n    writeArrayBuffer(path: string, data: ArrayBuffer, callback?: (err: Error) => void)\r\n    {\r\n        _indexedDB.objectStorePut(this.DBname, this.projectname, path, data, callback);\r\n        globalEmitter.emit(\"fs.write\", path);\r\n    }\r\n\r\n    /**\r\n     * 写文件\r\n     * @param path 文件路径\r\n     * @param data 文件数据\r\n     * @param callback 回调函数\r\n     */\r\n    writeString(path: string, data: string, callback?: (err: Error) => void)\r\n    {\r\n        _indexedDB.objectStorePut(this.DBname, this.projectname, path, data, callback);\r\n        globalEmitter.emit(\"fs.write\", path);\r\n    }\r\n\r\n    /**\r\n     * 写文件\r\n     * @param path 文件路径\r\n     * @param object 文件数据\r\n     * @param callback 回调函数\r\n     */\r\n    writeObject(path: string, object: Object, callback?: (err: Error) => void)\r\n    {\r\n        _indexedDB.objectStorePut(this.DBname, this.projectname, path, object, callback);\r\n        globalEmitter.emit(\"fs.write\", path);\r\n    }\r\n\r\n    /**\r\n     * 写图片\r\n     * @param path 图片路径\r\n     * @param image 图片\r\n     * @param callback 回调函数\r\n     */\r\n    writeImage(path: string, image: HTMLImageElement, callback?: (err: Error) => void)\r\n    {\r\n        dataTransform.imageToArrayBuffer(image, (arraybuffer) =>\r\n        {\r\n            this.writeArrayBuffer(path, arraybuffer, callback);\r\n            globalEmitter.emit(\"fs.write\", path);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 复制文件\r\n     * @param src    源路径\r\n     * @param dest    目标路径\r\n     * @param callback 回调函数\r\n     */\r\n    copyFile(src: string, dest: string, callback?: (err: Error) => void)\r\n    {\r\n        _indexedDB.objectStoreGet(this.DBname, this.projectname, src, (err, data) =>\r\n        {\r\n            if (err)\r\n            {\r\n                callback(err);\r\n                return;\r\n            }\r\n            _indexedDB.objectStorePut(this.DBname, this.projectname, dest, data, callback);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 是否存在指定项目\r\n     * @param projectname 项目名称\r\n     * @param callback 回调函数\r\n     */\r\n    hasProject(projectname: string, callback: (has: boolean) => void)\r\n    {\r\n        _indexedDB.getObjectStoreNames(this.DBname, (err, objectStoreNames) =>\r\n        {\r\n            if (err) { callback(false); return; }\r\n            callback(objectStoreNames.indexOf(projectname) != -1);\r\n        });\r\n    }\r\n    /**\r\n     * 初始化项目\r\n     * @param projectname 项目名称\r\n     * @param callback 回调函数\r\n     */\r\n    initproject(projectname: string, callback: (err: Error) => void)\r\n    {\r\n        this.projectname = projectname;\r\n        _indexedDB.createObjectStore(this.DBname, projectname, callback);\r\n    }\r\n}\r\n\r\n/**\r\n * 索引数据文件系统\r\n */\r\nexport const indexedDBFS = new IndexedDBFS();\r\n","\r\n/**\r\n * 路径工具\r\n */\r\nexport class PathUtils\r\n{\r\n    /**\r\n     * 标准化文件夹路径\r\n     * @param path \r\n     */\r\n    normalizeDir(path: string): string\r\n    {\r\n        if (path[path.length - 1] == \"/\")\r\n            path = path.substr(0, path.length - 1);\r\n        return path;\r\n    }\r\n    /**\r\n     * 是否为HTTP地址\r\n     * \r\n     * @param path 地址\r\n     */\r\n    isHttpURL(path: string): any\r\n    {\r\n        if (path.indexOf(\"http://\") != -1 || path.indexOf(\"https://\") != -1 || path.indexOf(\"file:///\") != -1)\r\n            return true;\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * 获取不带后缀名称\r\n     * @param path 路径\r\n     */\r\n    getName(path: string)\r\n    {\r\n        console.assert(path != undefined);\r\n        var name = this.basename(path);\r\n        if (this.isDirectory(path))\r\n            return name;\r\n        name = name.split(\".\").shift();\r\n        return name;\r\n    }\r\n\r\n    /**\r\n     * 获取带后缀名称\r\n     * @param path 路径\r\n     */\r\n    basename(path: string)\r\n    {\r\n        console.assert(path != undefined);\r\n        var paths = path.split(\"/\");\r\n        var name = paths.pop();\r\n        if (name == \"\")\r\n            name = paths.pop();\r\n        return name;\r\n    }\r\n\r\n    /**\r\n     * 获取后缀\r\n     * @param path 路径\r\n     */\r\n    extname(path: string)\r\n    {\r\n        console.assert(path != undefined);\r\n        var name = this.basename(path);\r\n        var index = name.indexOf(\".\");\r\n        if (index == -1) return \"\";\r\n        return name.substr(index);\r\n    }\r\n\r\n    /**\r\n     * 父路径\r\n     * @param path 路径\r\n     */\r\n    dirname(path: string)\r\n    {\r\n        console.assert(path != undefined);\r\n        var paths = path.split(\"/\");\r\n        if (this.isDirectory(path))\r\n            paths.pop();\r\n        paths.pop();\r\n        return paths.join(\"/\");\r\n    }\r\n\r\n    /**\r\n     * 获取子文件（非文件夹）路径\r\n     * \r\n     * @param parentPath 父文件夹路径\r\n     * @param childName 子文件名称\r\n     */\r\n    getChildFilePath(parentPath: string, childName: string)\r\n    {\r\n        console.assert(parentPath != undefined);\r\n        console.assert(childName != undefined);\r\n\r\n        if (parentPath.charAt(parentPath.length - 1) != \"/\") parentPath += \"/\";\r\n        return parentPath + childName;\r\n    }\r\n\r\n    /**\r\n     * 获取子文件夹路径\r\n     * \r\n     * @param parentPath 父文件夹路径\r\n     * @param childFolderName 子文件夹名称\r\n     */\r\n    getChildFolderPath(parentPath: string, childFolderName: string)\r\n    {\r\n        if (parentPath.charAt(parentPath.length - 1) != \"/\") parentPath += \"/\";\r\n        if (childFolderName.charAt(childFolderName.length - 1) != \"/\") childFolderName += \"/\";\r\n\r\n        return parentPath + childFolderName;\r\n    }\r\n\r\n    /**\r\n     * 是否文件夹\r\n     * @param path 路径\r\n     */\r\n    isDirectory(path: string)\r\n    {\r\n        return path.split(\"/\").pop() == \"\";\r\n    }\r\n\r\n    /**\r\n     * 获取目录深度\r\n     * @param path 路径\r\n     */\r\n    getDirDepth(path: string)\r\n    {\r\n        var length = path.split(\"/\").length;\r\n        if (this.isDirectory(path))\r\n            length--;\r\n        return length - 1;\r\n    }\r\n}\r\n\r\n/**\r\n * 路径工具\r\n */\r\nexport const pathUtils = new PathUtils();\r\n","import { task } from \"@feng3d/task\";\r\nimport { FSType } from \"./FSType\";\r\nimport { basefs } from \"./HttpFS\";\r\nimport { IReadFS } from \"./IReadFS\";\r\n\r\n/**\r\n * 可读文件系统\r\n */\r\nexport class ReadFS\r\n{\r\n    /**\r\n     * 基础文件系统\r\n     */\r\n    get fs() { return this._fs || basefs; }\r\n    set fs(v) { this._fs = v; }\r\n    protected _fs: IReadFS;\r\n\r\n    /**\r\n     * 文件系统类型\r\n     */\r\n    get type(): FSType\r\n    {\r\n        return this.fs.type;\r\n    }\r\n\r\n    constructor(fs?: IReadFS)\r\n    {\r\n        this.fs = fs;\r\n    }\r\n\r\n    /**\r\n     * 读取文件为ArrayBuffer\r\n     * @param path 路径\r\n     * @param callback 读取完成回调 当err不为null时表示读取失败\r\n     */\r\n    readArrayBuffer(path: string, callback: (err: Error, arraybuffer: ArrayBuffer) => void)\r\n    {\r\n        this.fs.readArrayBuffer(path, callback);\r\n    }\r\n\r\n    /**\r\n     * 读取文件为字符串\r\n     * @param path 路径\r\n     * @param callback 读取完成回调 当err不为null时表示读取失败\r\n     */\r\n    readString(path: string, callback: (err: Error, str: string) => void)\r\n    {\r\n        this.fs.readString(path, callback);\r\n    }\r\n\r\n    /**\r\n     * 读取文件为Object\r\n     * @param path 路径\r\n     * @param callback 读取完成回调 当err不为null时表示读取失败\r\n     */\r\n    readObject(path: string, callback: (err: Error, object: Object) => void)\r\n    {\r\n        this.fs.readObject(path, callback);\r\n    }\r\n\r\n    /**\r\n     * 加载图片\r\n     * @param path 图片路径\r\n     * @param callback 加载完成回调\r\n     */\r\n    readImage(path: string, callback: (err: Error, img: HTMLImageElement) => void)\r\n    {\r\n        this.fs.readImage(path, callback);\r\n\r\n        // functionwrap.wrapF(this.fs, this.fs.readImage, [path], callback);\r\n    }\r\n\r\n    /**\r\n     * 获取文件绝对路径\r\n     * @param path （相对）路径\r\n     */\r\n    getAbsolutePath(path: string)\r\n    {\r\n        return this.fs.getAbsolutePath(path);\r\n    }\r\n\r\n    /**\r\n     * 读取文件列表为字符串列表\r\n     * \r\n     * @param path 路径\r\n     * @param callback 读取完成回调 当err不为null时表示读取失败\r\n     */\r\n    readStrings(paths: string[], callback: (strs: (string | Error)[]) => void)\r\n    {\r\n        task.parallelResults(paths, (path, callback) =>\r\n        {\r\n            this.readString(path, (err, str) =>\r\n            {\r\n                callback(err || str);\r\n            });\r\n        }, callback);\r\n    }\r\n\r\n    protected _images: { [path: string]: HTMLImageElement } = {};\r\n\r\n    private _state: { [eventtype: string]: true } = {};\r\n}\r\n\r\n/**\r\n * 默认文件系统\r\n */\r\nexport const fs = new ReadFS();\r\n","import { dataTransform } from \"@feng3d/polyfill\";\r\nimport { IReadWriteFS } from \"./IReadWriteFS\";\r\nimport { pathUtils } from \"./PathUtils\";\r\nimport { ReadFS } from \"./ReadFS\";\r\n\r\n/**\r\n * 可读写文件系统\r\n * \r\n * 扩展基础可读写文件系统\r\n */\r\nexport class ReadWriteFS extends ReadFS\r\n{\r\n    /**\r\n     * 项目名称（表单名称）\r\n     */\r\n    projectname: string;\r\n\r\n    get fs(): IReadWriteFS\r\n    {\r\n        return <any>this._fs;\r\n    }\r\n    set fs(value: IReadWriteFS)\r\n    {\r\n        this._fs = value;\r\n    }\r\n\r\n    constructor(fs?: IReadWriteFS)\r\n    {\r\n        super(fs);\r\n    }\r\n\r\n    /**\r\n     * 文件是否存在\r\n     * @param path 文件路径\r\n     * @param callback 回调函数\r\n     */\r\n    exists(path: string, callback: (exists: boolean) => void)\r\n    {\r\n        this.fs.exists(path, callback);\r\n    }\r\n\r\n    /**\r\n     * 读取文件夹中文件列表\r\n     * @param path 路径\r\n     * @param callback 回调函数\r\n     */\r\n    readdir(path: string, callback: (err: Error, files: string[]) => void)\r\n    {\r\n        this.fs.readdir(path, callback);\r\n    }\r\n\r\n    /**\r\n     * 新建文件夹\r\n     * @param path 文件夹路径\r\n     * @param callback 回调函数\r\n     */\r\n    mkdir(path: string, callback?: (err: Error) => void)\r\n    {\r\n        path = pathUtils.normalizeDir(path);\r\n\r\n        this.fs.exists(path, (exists) =>\r\n        {\r\n            if (exists)\r\n            {\r\n                callback && callback(null);\r\n                return;\r\n            }\r\n            this.fs.mkdir(path, callback);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 删除文件\r\n     * @param path 文件路径\r\n     * @param callback 回调函数\r\n     */\r\n    deleteFile(path: string, callback?: (err: Error) => void)\r\n    {\r\n        this.fs.deleteFile(path, callback);\r\n    }\r\n\r\n    /**\r\n     * 写(新建)文件\r\n     * 自动根据文件类型保存为对应结构\r\n     * \r\n     * @param path 文件路径\r\n     * @param arraybuffer 文件数据\r\n     * @param callback 回调函数\r\n     */\r\n    writeFile(path: string, arraybuffer: ArrayBuffer, callback?: (err: Error) => void)\r\n    {\r\n        var ext = pathUtils.extname(path);\r\n        ext = ext.split(\".\").pop();\r\n        var fileTypedic = { \"meta\": \"txt\", \"json\": \"object\", \"jpg\": \"arraybuffer\", \"png\": \"arraybuffer\", \"mp3\": \"arraybuffer\", \"js\": \"txt\", \"ts\": \"txt\", \"map\": \"txt\", \"html\": \"txt\" };\r\n        var type = fileTypedic[ext];\r\n        if (path == \"tsconfig.json\" || path == \".vscode/settings.json\")\r\n            type = \"txt\";\r\n\r\n        if (type == \"txt\")\r\n        {\r\n            dataTransform.arrayBufferToString(arraybuffer, (str) =>\r\n            {\r\n                this.fs.writeString(path, str, (err) =>\r\n                {\r\n                    callback(err);\r\n                });\r\n            });\r\n        } else if (type == \"object\")\r\n        {\r\n            dataTransform.arrayBufferToObject(arraybuffer, (obj) =>\r\n            {\r\n                this.fs.writeObject(path, obj, (err) =>\r\n                {\r\n                    callback(err);\r\n                });\r\n            });\r\n        } else if (type == \"arraybuffer\")\r\n        {\r\n            this.writeArrayBuffer(path, arraybuffer, (err) =>\r\n            {\r\n                callback(err);\r\n            });\r\n        } else\r\n        {\r\n            console.error(`无法导入文件 ${path}`)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 写ArrayBuffer(新建)文件\r\n     * @param path 文件路径\r\n     * @param arraybuffer 文件数据\r\n     * @param callback 回调函数\r\n     */\r\n    writeArrayBuffer(path: string, arraybuffer: ArrayBuffer, callback?: (err: Error) => void)\r\n    {\r\n        // 如果所属文件夹不存在则新建\r\n        var dirpath = pathUtils.dirname(path);\r\n        this.mkdir(dirpath, (err) =>\r\n        {\r\n            if (err)\r\n            {\r\n                callback && callback(err);\r\n                return;\r\n            }\r\n            this.fs.writeArrayBuffer(path, arraybuffer, callback);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 写字符串到(新建)文件\r\n     * @param path 文件路径\r\n     * @param str 文件数据\r\n     * @param callback 回调函数\r\n     */\r\n    writeString(path: string, str: string, callback?: (err: Error) => void)\r\n    {\r\n        // 如果所属文件夹不存在则新建\r\n        var dirpath = pathUtils.dirname(path);\r\n        this.mkdir(dirpath, (err) =>\r\n        {\r\n            if (err)\r\n            {\r\n                callback && callback(err);\r\n                return;\r\n            }\r\n            this.fs.writeString(path, str, callback);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 写Object到(新建)文件\r\n     * @param path 文件路径\r\n     * @param object 文件数据\r\n     * @param callback 回调函数\r\n     */\r\n    writeObject(path: string, object: Object, callback?: (err: Error) => void)\r\n    {\r\n        // 如果所属文件夹不存在则新建\r\n        var dirpath = pathUtils.dirname(path);\r\n        this.mkdir(dirpath, (err) =>\r\n        {\r\n            if (err)\r\n            {\r\n                callback && callback(err);\r\n                return;\r\n            }\r\n            this.fs.writeObject(path, object, callback);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 写图片\r\n     * @param path 图片路径\r\n     * @param image 图片\r\n     * @param callback 回调函数\r\n     */\r\n    writeImage(path: string, image: HTMLImageElement, callback?: (err: Error) => void)\r\n    {\r\n        // 如果所属文件夹不存在则新建\r\n        var dirpath = pathUtils.dirname(path);\r\n        this.mkdir(dirpath, (err) =>\r\n        {\r\n            if (err)\r\n            {\r\n                callback && callback(err);\r\n                return;\r\n            }\r\n            this.fs.writeImage(path, image, callback);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 复制文件\r\n     * @param src    源路径\r\n     * @param dest    目标路径\r\n     * @param callback 回调函数\r\n     */\r\n    copyFile(src: string, dest: string, callback?: (err: Error) => void)\r\n    {\r\n        this.fs.copyFile(src, dest, callback);\r\n    }\r\n\r\n    /**\r\n     * 是否为文件夹\r\n     *\r\n     * @param path 文件路径\r\n     * @param callback 完成回调\r\n     */\r\n    isDirectory(path: string, callback: (result: boolean) => void)\r\n    {\r\n        this.fs.isDirectory(path, callback);\r\n    }\r\n\r\n    /**\r\n     * 初始化项目\r\n     * @param projectname 项目名称\r\n     * @param callback 回调函数\r\n     */\r\n    initproject(projectname: string, callback: (err: Error) => void)\r\n    {\r\n        this.fs.initproject(projectname, callback);\r\n    }\r\n\r\n    /**\r\n     * 是否存在指定项目\r\n     * @param projectname 项目名称\r\n     * @param callback 回调函数\r\n     */\r\n    hasProject(projectname: string, callback: (has: boolean) => void)\r\n    {\r\n        this.fs.hasProject(projectname, callback);\r\n    }\r\n\r\n    /**\r\n     * 获取指定文件下所有文件路径列表\r\n     */\r\n    getAllPathsInFolder(dirpath = \"\", callback: (err: Error, filepaths: string[]) => void): void\r\n    {\r\n        var dirs = [dirpath];\r\n        var result = [];\r\n        var currentdir = \"\";\r\n\r\n        // 递归获取文件\r\n        var handle = () =>\r\n        {\r\n            if (dirs.length > 0)\r\n            {\r\n                currentdir = dirs.shift();\r\n                this.readdir(currentdir, (err, files) =>\r\n                {\r\n                    // 获取子文件路径\r\n                    var getChildPath = () =>\r\n                    {\r\n                        if (files.length == 0)\r\n                        {\r\n                            handle();\r\n                            return;\r\n                        }\r\n                        var childpath = currentdir + (currentdir == \"\" ? \"\" : \"/\") + files.shift();\r\n                        result.push(childpath);\r\n                        this.isDirectory(childpath, result =>\r\n                        {\r\n                            if (result) dirs.push(childpath);\r\n                            getChildPath();\r\n                        });\r\n                    };\r\n                    getChildPath();\r\n                });\r\n            } else\r\n            {\r\n                callback(null, result);\r\n            }\r\n        }\r\n        handle();\r\n    }\r\n\r\n    /**\r\n     * 移动文件\r\n     * @param src 源路径\r\n     * @param dest 目标路径\r\n     * @param callback 回调函数\r\n     */\r\n    moveFile(src: string, dest: string, callback?: (err: Error) => void)\r\n    {\r\n        this.copyFile(src, dest, (err) =>\r\n        {\r\n            if (err)\r\n            {\r\n                callback && callback(err);\r\n                return;\r\n            }\r\n            this.deleteFile(src, callback);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 重命名文件\r\n     * @param oldPath 老路径\r\n     * @param newPath 新路径\r\n     * @param callback 回调函数\r\n     */\r\n    renameFile(oldPath: string, newPath: string, callback?: (err: Error) => void): void\r\n    {\r\n        this.moveFile(oldPath, newPath, callback);\r\n    }\r\n\r\n    /**\r\n     * 移动一组文件\r\n     * @param movelists 移动列表\r\n     * @param callback 回调函数\r\n     */\r\n    moveFiles(movelists: [string, string][], callback?: (err: Error) => void)\r\n    {\r\n        this.copyFiles(movelists.concat(), (err) =>\r\n        {\r\n            if (err)\r\n            {\r\n                callback && callback(err);\r\n                return;\r\n            }\r\n            var deletelists = movelists.reduce((value: string[], current) => { value.push(current[0]); return value; }, [])\r\n            this.deleteFiles(deletelists, callback);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 复制一组文件\r\n     * @param copylists 复制列表\r\n     * @param callback 回调函数\r\n     */\r\n    copyFiles(copylists: [string, string][], callback?: (err: Error) => void)\r\n    {\r\n        if (copylists.length > 0)\r\n        {\r\n            var copyitem: [string, string] = <any>copylists.shift();\r\n            this.copyFile(copyitem[0], copyitem[1], (err) =>\r\n            {\r\n                if (err)\r\n                {\r\n                    callback && callback(err);\r\n                    return;\r\n                }\r\n                this.copyFiles(copylists, callback);\r\n            });\r\n            return;\r\n        }\r\n        callback && callback(null);\r\n    }\r\n\r\n    /**\r\n     * 删除一组文件\r\n     * @param deletelists 删除列表\r\n     * @param callback 回调函数\r\n     */\r\n    deleteFiles(deletelists: string[], callback?: (err: Error) => void)\r\n    {\r\n        if (deletelists.length > 0)\r\n        {\r\n            this.deleteFile(<string>deletelists.shift(), (err) =>\r\n            {\r\n                if (err)\r\n                {\r\n                    callback && callback(err);\r\n                    return;\r\n                }\r\n                this.deleteFiles(deletelists, callback);\r\n            });\r\n            return;\r\n        }\r\n        callback && callback(null);\r\n    }\r\n\r\n    /**\r\n     * 重命名文件(夹)\r\n     * @param oldPath 老路径\r\n     * @param newPath 新路径\r\n     * @param callback 回调函数\r\n     */\r\n    rename(oldPath: string, newPath: string, callback?: (err: Error) => void): void\r\n    {\r\n        this.isDirectory(oldPath, result =>\r\n        {\r\n            if (result)\r\n            {\r\n                this.getAllPathsInFolder(oldPath, (err, filepaths) =>\r\n                {\r\n                    if (err)\r\n                    {\r\n                        callback && callback(err);\r\n                        return;\r\n                    }\r\n                    var renamelists: [string, string][] = [[oldPath, newPath]];\r\n                    filepaths.forEach(element =>\r\n                    {\r\n                        renamelists.push([element, element.replace(oldPath, newPath)]);\r\n                    });\r\n                    this.moveFiles(renamelists, callback);\r\n                });\r\n            } else\r\n            {\r\n                this.renameFile(oldPath, newPath, callback);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 移动文件(夹)\r\n     * \r\n     * @param src 源路径\r\n     * @param dest 目标路径\r\n     * @param callback 回调函数\r\n     */\r\n    move(src: string, dest: string, callback?: (err?: Error) => void): void\r\n    {\r\n        this.rename(src, dest, callback);\r\n    }\r\n\r\n    /**\r\n     * 删除文件(夹)\r\n     * @param path 路径\r\n     * @param callback 回调函数\r\n     */\r\n    delete(path: string, callback?: (err: Error) => void): void\r\n    {\r\n        this.isDirectory(path, result =>\r\n        {\r\n            if (result)\r\n            {\r\n                this.getAllPathsInFolder(path, (err, filepaths) =>\r\n                {\r\n                    if (err)\r\n                    {\r\n                        callback && callback(err);\r\n                        return;\r\n                    }\r\n                    var removelists: string[] = filepaths.concat(path);\r\n                    this.deleteFiles(removelists, callback);\r\n                });\r\n            } else\r\n            {\r\n                this.deleteFile(path, callback);\r\n            }\r\n        });\r\n    }\r\n}\r\n"],"names":["this","let","const","prototypeAccessors","super"],"mappings":"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"}